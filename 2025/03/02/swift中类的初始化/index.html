<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=PingFang SC:300,300italic,400,400italic,700,700italic|consolas:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","Muse | Mist":320,"display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"default"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="swift 中类的初始化 在 Swift 中，类的初始化是通过 构造器（initializer） 来完成的。Swift 提供了多种初始化方式，主要包括： 1. 基本构造器Swift 类中的 init 方法 负责初始化实例的所有属性。">
<meta property="og:type" content="article">
<meta property="og:title" content="swift中类的初始化">
<meta property="og:url" content="http://example.com/2025/03/02/swift%E4%B8%AD%E7%B1%BB%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96/index.html">
<meta property="og:site_name" content="Yi&#39;s Lab">
<meta property="og:description" content="swift 中类的初始化 在 Swift 中，类的初始化是通过 构造器（initializer） 来完成的。Swift 提供了多种初始化方式，主要包括： 1. 基本构造器Swift 类中的 init 方法 负责初始化实例的所有属性。">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-03-02T04:04:05.000Z">
<meta property="article:modified_time" content="2025-09-01T08:36:04.797Z">
<meta property="article:author" content="YiDa">
<meta property="article:tag" content="swift编程">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/2025/03/02/swift%E4%B8%AD%E7%B1%BB%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>swift中类的初始化 | Yi's Lab</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Yi's Lab</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">You Find Your Own Tree.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section">首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section">关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section">标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section">分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section">归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger">搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/zhangyida-lab" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/03/02/swift%E4%B8%AD%E7%B1%BB%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="YiDa">
      <meta itemprop="description" content="自古人生于世，须有一技之能；我辈既务斯业，便当专心用功；以后名扬四海，根据即在年轻。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yi's Lab">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          swift中类的初始化
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-03-02 13:04:05" itemprop="dateCreated datePublished" datetime="2025-03-02T13:04:05+09:00">2025-03-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-09-01 17:36:04" itemprop="dateModified" datetime="2025-09-01T17:36:04+09:00">2025-09-01</time>
              </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="swift-中类的初始化"><a href="#swift-中类的初始化" class="headerlink" title="swift 中类的初始化"></a>swift 中类的初始化</h1><p> 在 Swift 中，类的初始化是通过 <strong>构造器（initializer）</strong> 来完成的。Swift 提供了多种初始化方式，主要包括：</p>
<h2 id="1-基本构造器"><a href="#1-基本构造器" class="headerlink" title="1. 基本构造器"></a>1. <strong>基本构造器</strong></h2><p>Swift 类中的 <strong>init 方法</strong> 负责初始化实例的所有属性。</p>
<span id="more"></span>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>, <span class="params">age</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">        <span class="keyword">self</span>.age <span class="operator">=</span> age</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p <span class="operator">=</span> <span class="type">Person</span>(name: <span class="string">&quot;Tom&quot;</span>, age: <span class="number">25</span>)</span><br><span class="line"><span class="built_in">print</span>(p.name)  <span class="comment">// Tom</span></span><br><span class="line"><span class="built_in">print</span>(p.age)   <span class="comment">// 25</span></span><br></pre></td></tr></table></figure>

<p>⚠️ <strong>必须初始化所有非可选属性</strong>，否则会报错。</p>
<h2 id="2-默认构造器（Default-Initializer）"><a href="#2-默认构造器（Default-Initializer）" class="headerlink" title="2. 默认构造器（Default Initializer）"></a>2. <strong>默认构造器（Default Initializer）</strong></h2><p>如果所有属性都有默认值，Swift 会提供一个默认的无参数构造器。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> brand <span class="operator">=</span> <span class="string">&quot;Toyota&quot;</span></span><br><span class="line">    <span class="keyword">var</span> year <span class="operator">=</span> <span class="number">2020</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> c <span class="operator">=</span> <span class="type">Car</span>()  <span class="comment">// 自动使用默认构造器</span></span><br><span class="line"><span class="built_in">print</span>(c.brand)  <span class="comment">// Toyota</span></span><br></pre></td></tr></table></figure>

<h2 id="3-可选属性的初始化"><a href="#3-可选属性的初始化" class="headerlink" title="3. 可选属性的初始化"></a>3. <strong>可选属性的初始化</strong></h2><p>可选属性（<code>?</code>）默认是 <code>nil</code>，可以不用在 <code>init</code> 里赋值：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> title: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> author: <span class="type">String</span>?</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">title</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.title <span class="operator">=</span> title</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b <span class="operator">=</span> <span class="type">Book</span>(title: <span class="string">&quot;Swift Programming&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(b.author)  <span class="comment">// nil</span></span><br></pre></td></tr></table></figure>

<h2 id="4-自定义构造器（Custom-Initializer）"><a href="#4-自定义构造器（Custom-Initializer）" class="headerlink" title="4. 自定义构造器（Custom Initializer）"></a>4. <strong>自定义构造器（Custom Initializer）</strong></h2><p>可以创建多个构造器来适应不同的初始化需求：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>() &#123;  <span class="comment">// 无参构造器</span></span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> <span class="string">&quot;Default&quot;</span></span><br><span class="line">        <span class="keyword">self</span>.age <span class="operator">=</span> <span class="number">18</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>, <span class="params">age</span>: <span class="type">Int</span>) &#123;  <span class="comment">// 带参数构造器</span></span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">        <span class="keyword">self</span>.age <span class="operator">=</span> age</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> u1 <span class="operator">=</span> <span class="type">User</span>()  <span class="comment">// 使用无参构造器</span></span><br><span class="line"><span class="keyword">let</span> u2 <span class="operator">=</span> <span class="type">User</span>(name: <span class="string">&quot;Alice&quot;</span>, age: <span class="number">22</span>)  <span class="comment">// 使用带参数构造器</span></span><br></pre></td></tr></table></figure>

<h2 id="5-convenience-便利构造器"><a href="#5-convenience-便利构造器" class="headerlink" title="5. convenience 便利构造器"></a>5. <strong>convenience 便利构造器</strong></h2><p>用于在类中提供更简洁的初始化方式，但最终必须调用 <strong>指定构造器（designated initializer）</strong>。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> type: <span class="type">String</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>, <span class="params">type</span>: <span class="type">String</span>) &#123;  <span class="comment">// 指定构造器</span></span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">        <span class="keyword">self</span>.type <span class="operator">=</span> type</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">convenience</span> <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>) &#123;  <span class="comment">// 便利构造器</span></span><br><span class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(name: name, type: <span class="string">&quot;Unknown&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a <span class="operator">=</span> <span class="type">Animal</span>(name: <span class="string">&quot;Dog&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(a.type)  <span class="comment">// Unknown</span></span><br></pre></td></tr></table></figure>

<p><code>convenience</code> 不能直接初始化属性，必须调用另一个 <code>init</code> 方法。</p>
<h2 id="6-必需构造器-required"><a href="#6-必需构造器-required" class="headerlink" title="6. 必需构造器 (required)"></a>6. <strong>必需构造器 (required)</strong></h2><p>如果希望所有子类都必须实现某个构造器，可以使用 <code>required</code> 关键字：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Vehicle</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> speed: <span class="type">Int</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>(<span class="params">speed</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.speed <span class="operator">=</span> speed</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bike</span>: <span class="title class_">Vehicle</span> &#123;</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>(<span class="params">speed</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(speed: speed)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>子类必须实现 required 构造器，否则会编译错误。</strong></p>
<h2 id="7-Failable-Initializer（可能失败的构造器）"><a href="#7-Failable-Initializer（可能失败的构造器）" class="headerlink" title="7. Failable Initializer（可能失败的构造器）"></a>7. <strong>Failable Initializer（可能失败的构造器）</strong></h2><p>使用 <code>init?</code> 或 <code>init!</code> 允许构造器返回 <code>nil</code>（初始化失败）。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init?</span>(<span class="params">name</span>: <span class="type">String</span>) &#123;  </span><br><span class="line">        <span class="keyword">if</span> name.isEmpty &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nil</span>  <span class="comment">// 初始化失败</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p1 <span class="operator">=</span> <span class="type">Product</span>(name: <span class="string">&quot;&quot;</span>)  <span class="comment">// nil</span></span><br><span class="line"><span class="keyword">let</span> p2 <span class="operator">=</span> <span class="type">Product</span>(name: <span class="string">&quot;iPhone&quot;</span>)  <span class="comment">// 正常初始化</span></span><br></pre></td></tr></table></figure>

<h2 id="8-deinit-析构器"><a href="#8-deinit-析构器" class="headerlink" title="8. deinit 析构器"></a>8. <strong>deinit 析构器</strong></h2><p>当对象被销毁时，<code>deinit</code> 会被调用：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">FileManager</span> &#123;</span><br><span class="line">    <span class="keyword">init</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;FileManager initialized&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">deinit</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;FileManager deallocated&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> file: <span class="type">FileManager</span>? <span class="operator">=</span> <span class="type">FileManager</span>()  </span><br><span class="line">file <span class="operator">=</span> <span class="literal">nil</span>  <span class="comment">// 释放对象，触发 `deinit`</span></span><br></pre></td></tr></table></figure>

<h3 id="结论："><a href="#结论：" class="headerlink" title="结论："></a>结论：</h3><p>Swift 的类初始化方式丰富，主要方式包括：</p>
<ol>
<li><strong>普通构造器 init</strong></li>
<li><strong>默认构造器（适用于有默认值的属性）</strong></li>
<li><strong>可选属性初始化</strong></li>
<li><strong>多个自定义构造器</strong></li>
<li><strong>convenience 便利构造器</strong></li>
<li><strong>required 必需构造器</strong></li>
<li><strong>init? 可能失败的构造器</strong></li>
<li><strong>deinit 析构器</strong><br>这些特性使得 Swift 的类初始化既灵活又安全！🎯</li>
</ol>
<h1 id="用户问题"><a href="#用户问题" class="headerlink" title="用户问题"></a>用户问题</h1><p> 类的初始化的底层原理 </p>
<h3 id="Swift-类的初始化底层原理"><a href="#Swift-类的初始化底层原理" class="headerlink" title="Swift 类的初始化底层原理"></a><strong>Swift 类的初始化底层原理</strong></h3><p>在 Swift 中，类的初始化是一个复杂的过程，涉及 <strong>内存分配、初始化流程、继承体系、动态派发</strong> 等底层机制。我们可以从以下几个方面来理解 Swift 类初始化的底层原理。</p>
<h2 id="1-类的内存分配"><a href="#1-类的内存分配" class="headerlink" title="1. 类的内存分配"></a><strong>1. 类的内存分配</strong></h2><p>在 Swift 中，类是 <strong>引用类型（Reference Type）</strong>，对象的存储方式和结构体不同：</p>
<ul>
<li><strong>类的实例存储在堆（Heap）中</strong>，由 ARC（自动引用计数）管理。</li>
<li><strong>实例变量（属性）存储在对象的内存块中</strong>。</li>
<li><strong>对象的 vtable（方法表）存储在类的元数据中</strong>，用于动态派发方法调用。<br><strong>初始化时的内存分配过程：</strong></li>
</ul>
<ol>
<li><strong>swift_allocObject 分配内存</strong>（来自 Swift Runtime）。</li>
<li><strong>零初始化内存</strong>，所有存储属性设置为默认值（如 nil、0 等）。</li>
<li>**调用构造器 init()**，设置实际属性值。<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>, <span class="params">age</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">        <span class="keyword">self</span>.age <span class="operator">=</span> age</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p <span class="operator">=</span> <span class="type">Person</span>(name: <span class="string">&quot;Tom&quot;</span>, age: <span class="number">25</span>) <span class="comment">// 堆上分配内存，调用 init()</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p>在汇编层面，Swift 使用 <strong>swift_allocObject</strong> 进行对象分配：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">swift_allocObject(typeMetaData, size, align)</span><br></pre></td></tr></table></figure>

<ul>
<li>typeMetaData：类型元数据（metadata），用于存储 vtable 和类型信息。</li>
<li>size：对象的大小（根据属性计算）。</li>
<li>align：对齐方式。</li>
</ul>
<h2 id="2-Swift-类的初始化流程"><a href="#2-Swift-类的初始化流程" class="headerlink" title="2. Swift 类的初始化流程"></a><strong>2. Swift 类的初始化流程</strong></h2><p>Swift 采用 <strong>两阶段初始化（Two-Phase Initialization）</strong> 来保证对象的安全性。</p>
<h3 id="阶段-1：存储属性初始化"><a href="#阶段-1：存储属性初始化" class="headerlink" title="阶段 1：存储属性初始化"></a><strong>阶段 1：存储属性初始化</strong></h3><ol>
<li>调用 <strong>swift_allocObject</strong> 分配对象的内存，并设置默认值。</li>
<li>依次调用类层级结构中的 <strong>init</strong> 方法，初始化属性。<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> x: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">x</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.x <span class="operator">=</span> x</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;A init&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>: <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> y: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">x</span>: <span class="type">Int</span>, <span class="params">y</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.y <span class="operator">=</span> y  <span class="comment">// ✅ 子类属性必须先初始化</span></span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(x: x)  <span class="comment">// ✅ 然后调用父类的 `init`</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;B init&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj <span class="operator">=</span> <span class="type">B</span>(x: <span class="number">10</span>, y: <span class="number">20</span>)</span><br><span class="line"><span class="comment">/* 输出：</span></span><br><span class="line"><span class="comment"> A init</span></span><br><span class="line"><span class="comment"> B init</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p>规则：</p>
<ul>
<li><strong>子类的存储属性必须先初始化</strong>，再调用 super.init() 。</li>
<li><strong>父类的 init 只能在子类的属性初始化完成后调用</strong>。</li>
</ul>
<h3 id="阶段-2：对象完全初始化"><a href="#阶段-2：对象完全初始化" class="headerlink" title="阶段 2：对象完全初始化"></a><strong>阶段 2：对象完全初始化</strong></h3><ol>
<li>init 方法执行完成，实例可用。</li>
<li>如果 init 方法是 required，子类必须重写。</li>
<li>convenience init 只是辅助构造器，最终要调用 designated init。</li>
</ol>
<h2 id="3-Swift-的初始化方法在底层的调用过程"><a href="#3-Swift-的初始化方法在底层的调用过程" class="headerlink" title="3. Swift 的初始化方法在底层的调用过程"></a><strong>3. Swift 的初始化方法在底层的调用过程</strong></h2><p>Swift 的 <code>init()</code> 方法在底层是 <strong>C++ vtable（虚函数表）+ Swift 元数据</strong> 结合的实现。</p>
<p>例如，Swift 类在底层被转换为类似 C++ 结构：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="type">void</span>* isa; <span class="comment">// 指向类的元数据</span></span><br><span class="line">    <span class="type">char</span>* name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>在 <code>init()</code> 过程中，Swift 进行如下操作：</p>
<ol>
<li><strong>swift_allocObject 申请内存</strong></li>
<li><strong>默认初始化 self</strong></li>
<li><strong>调用 init() 构造器</strong></li>
<li><strong>填充 self 的属性</strong></li>
<li><strong>返回对象</strong><br>在汇编层面：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mov r0, #size    // 分配 size 大小的内存</span><br><span class="line">bl swift_allocObject // 调用 swift_allocObject 分配对象</span><br><span class="line">str r0, [sp, #self] // 存储 self 指针</span><br><span class="line">bl _T05PersonC5inityACSS_SitcfC // 调用 init()</span><br></pre></td></tr></table></figure>

<h2 id="4-convenience-init-的底层调用"><a href="#4-convenience-init-的底层调用" class="headerlink" title="4. convenience init 的底层调用"></a><strong>4. convenience init 的底层调用</strong></h2><p>Swift 的 <strong>convenience init 只是语法糖</strong>，它最终会调用 <code>init()</code>。</p>
<p>示例：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> brand: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> year: <span class="type">Int</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">brand</span>: <span class="type">String</span>, <span class="params">year</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.brand <span class="operator">=</span> brand</span><br><span class="line">        <span class="keyword">self</span>.year <span class="operator">=</span> year</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">convenience</span> <span class="keyword">init</span>(<span class="params">brand</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(brand: brand, year: <span class="number">2020</span>) <span class="comment">// 必须调用另一个 init()</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>底层逻辑：</p>
<ol>
<li>convenience init <strong>不会直接初始化存储属性</strong>，必须调用 init()</li>
<li>init() 先执行，再执行 convenience init<br>在底层的调用链：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bl _T05CarC5inityACSS_SitcfC   // 调用 init(brand:year:)</span><br><span class="line">bl _T05CarC5inityACSS_tcfc    // convenience init 调用 init()</span><br></pre></td></tr></table></figure>

<h2 id="5-required-init-在底层的实现"><a href="#5-required-init-在底层的实现" class="headerlink" title="5. required init 在底层的实现"></a><strong>5. required init 在底层的实现</strong></h2><p><code>required</code> 关键字确保 <strong>所有子类都必须实现</strong> 该构造器。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span>: <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(name: name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在底层：</p>
<ul>
<li>required init 通过 <strong>vtable 进行动态分发</strong>，以确保子类必须实现。<br>在 Swift Runtime 中：</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">AnimalVTable</span> &#123;</span><br><span class="line">    <span class="built_in">void</span> (*required_init)(Animal*, String);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>在汇编层面：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bl _T06AnimalC5inityACSScfc   // 调用 Animal 的 init()</span><br><span class="line">bl _T03DogC5inityACSScfc      // 调用 Dog 的 init()</span><br></pre></td></tr></table></figure>

<p>由于 Swift 运行时支持 <strong>动态派发</strong>，<code>required init</code> 确保子类必须实现它。</p>
<h2 id="6-deinit-析构器的底层实现"><a href="#6-deinit-析构器的底层实现" class="headerlink" title="6. deinit 析构器的底层实现"></a><strong>6. deinit 析构器的底层实现</strong></h2><p>Swift 使用 ARC 管理对象，当引用计数为 <code>0</code> 时，调用 <code>deinit</code> 释放对象。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">File</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>) &#123; <span class="keyword">self</span>.name <span class="operator">=</span> name &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">deinit</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;File <span class="subst">\(name)</span> is being deinitialized&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> file: <span class="type">File</span>? <span class="operator">=</span> <span class="type">File</span>(name: <span class="string">&quot;log.txt&quot;</span>)</span><br><span class="line">file <span class="operator">=</span> <span class="literal">nil</span>  <span class="comment">// 触发 deinit()</span></span><br></pre></td></tr></table></figure>

<p><strong>底层调用</strong></p>
<ol>
<li>swift_release(self) 递减引用计数。</li>
<li>deinit() 触发清理逻辑。</li>
<li>swift_deallocObject(self) 释放内存。<br>在汇编层面：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bl swift_release  // 递减引用计数</span><br><span class="line">cmp r0, #0        // 判断是否为 0</span><br><span class="line">beq _deinit       // 如果为 0，调用 deinit</span><br><span class="line">bl swift_deallocObject // 释放对象</span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a><strong>总结</strong></h2><ol>
<li><strong>Swift 类的初始化是两阶段的</strong>：</li>
</ol>
<ul>
<li>第一阶段：分配内存 + 初始化存储属性。</li>
<li>第二阶段：完成对象初始化，允许方法调用。</li>
</ul>
<ol start="2">
<li><strong>底层依赖 swift_allocObject 进行内存分配</strong>，并通过 <strong>vtable + Swift 元数据</strong> 进行方法分发。</li>
<li>**convenience init 只是语法糖，最终必须调用 init()**。</li>
<li><strong>required init 强制子类实现，底层通过 vtable 进行动态派发</strong>。</li>
<li><strong>deinit 依赖 ARC 进行对象释放，调用 swift_release 和 swift_deallocObject</strong>。<br>Swift 的初始化机制<strong>兼顾了安全性和性能</strong>，避免了未初始化对象的访问错误，并且优化了类的内存管理。🚀</li>
</ol>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/swift%E7%BC%96%E7%A8%8B/" rel="tag"># swift编程</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2025/03/02/swift%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6/" rel="prev" title="swift错误处理机制">
      <i class="fa fa-chevron-left"></i> swift错误处理机制
    </a></div>
      <div class="post-nav-item">
    <a href="/2025/03/02/swiftui%E5%B1%9E%E6%80%A7%E5%8C%85%E8%A3%B9%E5%99%A8/" rel="next" title="swiftui属性包裹器">
      swiftui属性包裹器 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#swift-%E4%B8%AD%E7%B1%BB%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-text">swift 中类的初始化</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E5%9F%BA%E6%9C%AC%E6%9E%84%E9%80%A0%E5%99%A8"><span class="nav-text">1. 基本构造器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E9%BB%98%E8%AE%A4%E6%9E%84%E9%80%A0%E5%99%A8%EF%BC%88Default-Initializer%EF%BC%89"><span class="nav-text">2. 默认构造器（Default Initializer）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E5%8F%AF%E9%80%89%E5%B1%9E%E6%80%A7%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-text">3. 可选属性的初始化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%9E%84%E9%80%A0%E5%99%A8%EF%BC%88Custom-Initializer%EF%BC%89"><span class="nav-text">4. 自定义构造器（Custom Initializer）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-convenience-%E4%BE%BF%E5%88%A9%E6%9E%84%E9%80%A0%E5%99%A8"><span class="nav-text">5. convenience 便利构造器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-%E5%BF%85%E9%9C%80%E6%9E%84%E9%80%A0%E5%99%A8-required"><span class="nav-text">6. 必需构造器 (required)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-Failable-Initializer%EF%BC%88%E5%8F%AF%E8%83%BD%E5%A4%B1%E8%B4%A5%E7%9A%84%E6%9E%84%E9%80%A0%E5%99%A8%EF%BC%89"><span class="nav-text">7. Failable Initializer（可能失败的构造器）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-deinit-%E6%9E%90%E6%9E%84%E5%99%A8"><span class="nav-text">8. deinit 析构器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%93%E8%AE%BA%EF%BC%9A"><span class="nav-text">结论：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E9%97%AE%E9%A2%98"><span class="nav-text">用户问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Swift-%E7%B1%BB%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86"><span class="nav-text">Swift 类的初始化底层原理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E7%B1%BB%E7%9A%84%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D"><span class="nav-text">1. 类的内存分配</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-Swift-%E7%B1%BB%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E6%B5%81%E7%A8%8B"><span class="nav-text">2. Swift 类的初始化流程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%98%B6%E6%AE%B5-1%EF%BC%9A%E5%AD%98%E5%82%A8%E5%B1%9E%E6%80%A7%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-text">阶段 1：存储属性初始化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%98%B6%E6%AE%B5-2%EF%BC%9A%E5%AF%B9%E8%B1%A1%E5%AE%8C%E5%85%A8%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-text">阶段 2：对象完全初始化</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-Swift-%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E6%96%B9%E6%B3%95%E5%9C%A8%E5%BA%95%E5%B1%82%E7%9A%84%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B"><span class="nav-text">3. Swift 的初始化方法在底层的调用过程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-convenience-init-%E7%9A%84%E5%BA%95%E5%B1%82%E8%B0%83%E7%94%A8"><span class="nav-text">4. convenience init 的底层调用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-required-init-%E5%9C%A8%E5%BA%95%E5%B1%82%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="nav-text">5. required init 在底层的实现</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-deinit-%E6%9E%90%E6%9E%84%E5%99%A8%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0"><span class="nav-text">6. deinit 析构器的底层实现</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-text">总结</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">YiDa</p>
  <div class="site-description" itemprop="description">自古人生于世，须有一技之能；我辈既务斯业，便当专心用功；以后名扬四海，根据即在年轻。</div>
</div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2023 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">YiDa</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>

<script src="/js/utils.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>

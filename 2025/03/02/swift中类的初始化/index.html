<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=PingFang SC:300,300italic,400,400italic,700,700italic|consolas:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","Muse | Mist":320,"display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"default"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="swift ä¸­ç±»çš„åˆå§‹åŒ– åœ¨ Swift ä¸­ï¼Œç±»çš„åˆå§‹åŒ–æ˜¯é€šè¿‡ æ„é€ å™¨ï¼ˆinitializerï¼‰ æ¥å®Œæˆçš„ã€‚Swift æä¾›äº†å¤šç§åˆå§‹åŒ–æ–¹å¼ï¼Œä¸»è¦åŒ…æ‹¬ï¼š 1. åŸºæœ¬æ„é€ å™¨Swift ç±»ä¸­çš„ init æ–¹æ³• è´Ÿè´£åˆå§‹åŒ–å®ä¾‹çš„æ‰€æœ‰å±æ€§ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="swiftä¸­ç±»çš„åˆå§‹åŒ–">
<meta property="og:url" content="http://example.com/2025/03/02/swift%E4%B8%AD%E7%B1%BB%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96/index.html">
<meta property="og:site_name" content="Yi&#39;s Lab">
<meta property="og:description" content="swift ä¸­ç±»çš„åˆå§‹åŒ– åœ¨ Swift ä¸­ï¼Œç±»çš„åˆå§‹åŒ–æ˜¯é€šè¿‡ æ„é€ å™¨ï¼ˆinitializerï¼‰ æ¥å®Œæˆçš„ã€‚Swift æä¾›äº†å¤šç§åˆå§‹åŒ–æ–¹å¼ï¼Œä¸»è¦åŒ…æ‹¬ï¼š 1. åŸºæœ¬æ„é€ å™¨Swift ç±»ä¸­çš„ init æ–¹æ³• è´Ÿè´£åˆå§‹åŒ–å®ä¾‹çš„æ‰€æœ‰å±æ€§ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-03-02T04:04:05.000Z">
<meta property="article:modified_time" content="2025-09-01T08:36:04.797Z">
<meta property="article:author" content="YiDa">
<meta property="article:tag" content="swiftç¼–ç¨‹">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/2025/03/02/swift%E4%B8%AD%E7%B1%BB%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>swiftä¸­ç±»çš„åˆå§‹åŒ– | Yi's Lab</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Yi's Lab</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">You Find Your Own Tree.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section">é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section">å…³äº</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section">æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section">åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section">å½’æ¡£</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger">æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/zhangyida-lab" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/03/02/swift%E4%B8%AD%E7%B1%BB%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="YiDa">
      <meta itemprop="description" content="è‡ªå¤äººç”Ÿäºä¸–ï¼Œé¡»æœ‰ä¸€æŠ€ä¹‹èƒ½ï¼›æˆ‘è¾ˆæ—¢åŠ¡æ–¯ä¸šï¼Œä¾¿å½“ä¸“å¿ƒç”¨åŠŸï¼›ä»¥ååæ‰¬å››æµ·ï¼Œæ ¹æ®å³åœ¨å¹´è½»ã€‚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yi's Lab">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          swiftä¸­ç±»çš„åˆå§‹åŒ–
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2025-03-02 13:04:05" itemprop="dateCreated datePublished" datetime="2025-03-02T13:04:05+09:00">2025-03-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-09-01 17:36:04" itemprop="dateModified" datetime="2025-09-01T17:36:04+09:00">2025-09-01</time>
              </span>

          
            <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="swift-ä¸­ç±»çš„åˆå§‹åŒ–"><a href="#swift-ä¸­ç±»çš„åˆå§‹åŒ–" class="headerlink" title="swift ä¸­ç±»çš„åˆå§‹åŒ–"></a>swift ä¸­ç±»çš„åˆå§‹åŒ–</h1><p> åœ¨ Swift ä¸­ï¼Œç±»çš„åˆå§‹åŒ–æ˜¯é€šè¿‡ <strong>æ„é€ å™¨ï¼ˆinitializerï¼‰</strong> æ¥å®Œæˆçš„ã€‚Swift æä¾›äº†å¤šç§åˆå§‹åŒ–æ–¹å¼ï¼Œä¸»è¦åŒ…æ‹¬ï¼š</p>
<h2 id="1-åŸºæœ¬æ„é€ å™¨"><a href="#1-åŸºæœ¬æ„é€ å™¨" class="headerlink" title="1. åŸºæœ¬æ„é€ å™¨"></a>1. <strong>åŸºæœ¬æ„é€ å™¨</strong></h2><p>Swift ç±»ä¸­çš„ <strong>init æ–¹æ³•</strong> è´Ÿè´£åˆå§‹åŒ–å®ä¾‹çš„æ‰€æœ‰å±æ€§ã€‚</p>
<span id="more"></span>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>, <span class="params">age</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">        <span class="keyword">self</span>.age <span class="operator">=</span> age</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p <span class="operator">=</span> <span class="type">Person</span>(name: <span class="string">&quot;Tom&quot;</span>, age: <span class="number">25</span>)</span><br><span class="line"><span class="built_in">print</span>(p.name)  <span class="comment">// Tom</span></span><br><span class="line"><span class="built_in">print</span>(p.age)   <span class="comment">// 25</span></span><br></pre></td></tr></table></figure>

<p>âš ï¸ <strong>å¿…é¡»åˆå§‹åŒ–æ‰€æœ‰éå¯é€‰å±æ€§</strong>ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p>
<h2 id="2-é»˜è®¤æ„é€ å™¨ï¼ˆDefault-Initializerï¼‰"><a href="#2-é»˜è®¤æ„é€ å™¨ï¼ˆDefault-Initializerï¼‰" class="headerlink" title="2. é»˜è®¤æ„é€ å™¨ï¼ˆDefault Initializerï¼‰"></a>2. <strong>é»˜è®¤æ„é€ å™¨ï¼ˆDefault Initializerï¼‰</strong></h2><p>å¦‚æœæ‰€æœ‰å±æ€§éƒ½æœ‰é»˜è®¤å€¼ï¼ŒSwift ä¼šæä¾›ä¸€ä¸ªé»˜è®¤çš„æ— å‚æ•°æ„é€ å™¨ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> brand <span class="operator">=</span> <span class="string">&quot;Toyota&quot;</span></span><br><span class="line">    <span class="keyword">var</span> year <span class="operator">=</span> <span class="number">2020</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> c <span class="operator">=</span> <span class="type">Car</span>()  <span class="comment">// è‡ªåŠ¨ä½¿ç”¨é»˜è®¤æ„é€ å™¨</span></span><br><span class="line"><span class="built_in">print</span>(c.brand)  <span class="comment">// Toyota</span></span><br></pre></td></tr></table></figure>

<h2 id="3-å¯é€‰å±æ€§çš„åˆå§‹åŒ–"><a href="#3-å¯é€‰å±æ€§çš„åˆå§‹åŒ–" class="headerlink" title="3. å¯é€‰å±æ€§çš„åˆå§‹åŒ–"></a>3. <strong>å¯é€‰å±æ€§çš„åˆå§‹åŒ–</strong></h2><p>å¯é€‰å±æ€§ï¼ˆ<code>?</code>ï¼‰é»˜è®¤æ˜¯ <code>nil</code>ï¼Œå¯ä»¥ä¸ç”¨åœ¨ <code>init</code> é‡Œèµ‹å€¼ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> title: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> author: <span class="type">String</span>?</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">title</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.title <span class="operator">=</span> title</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b <span class="operator">=</span> <span class="type">Book</span>(title: <span class="string">&quot;Swift Programming&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(b.author)  <span class="comment">// nil</span></span><br></pre></td></tr></table></figure>

<h2 id="4-è‡ªå®šä¹‰æ„é€ å™¨ï¼ˆCustom-Initializerï¼‰"><a href="#4-è‡ªå®šä¹‰æ„é€ å™¨ï¼ˆCustom-Initializerï¼‰" class="headerlink" title="4. è‡ªå®šä¹‰æ„é€ å™¨ï¼ˆCustom Initializerï¼‰"></a>4. <strong>è‡ªå®šä¹‰æ„é€ å™¨ï¼ˆCustom Initializerï¼‰</strong></h2><p>å¯ä»¥åˆ›å»ºå¤šä¸ªæ„é€ å™¨æ¥é€‚åº”ä¸åŒçš„åˆå§‹åŒ–éœ€æ±‚ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>() &#123;  <span class="comment">// æ— å‚æ„é€ å™¨</span></span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> <span class="string">&quot;Default&quot;</span></span><br><span class="line">        <span class="keyword">self</span>.age <span class="operator">=</span> <span class="number">18</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>, <span class="params">age</span>: <span class="type">Int</span>) &#123;  <span class="comment">// å¸¦å‚æ•°æ„é€ å™¨</span></span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">        <span class="keyword">self</span>.age <span class="operator">=</span> age</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> u1 <span class="operator">=</span> <span class="type">User</span>()  <span class="comment">// ä½¿ç”¨æ— å‚æ„é€ å™¨</span></span><br><span class="line"><span class="keyword">let</span> u2 <span class="operator">=</span> <span class="type">User</span>(name: <span class="string">&quot;Alice&quot;</span>, age: <span class="number">22</span>)  <span class="comment">// ä½¿ç”¨å¸¦å‚æ•°æ„é€ å™¨</span></span><br></pre></td></tr></table></figure>

<h2 id="5-convenience-ä¾¿åˆ©æ„é€ å™¨"><a href="#5-convenience-ä¾¿åˆ©æ„é€ å™¨" class="headerlink" title="5. convenience ä¾¿åˆ©æ„é€ å™¨"></a>5. <strong>convenience ä¾¿åˆ©æ„é€ å™¨</strong></h2><p>ç”¨äºåœ¨ç±»ä¸­æä¾›æ›´ç®€æ´çš„åˆå§‹åŒ–æ–¹å¼ï¼Œä½†æœ€ç»ˆå¿…é¡»è°ƒç”¨ <strong>æŒ‡å®šæ„é€ å™¨ï¼ˆdesignated initializerï¼‰</strong>ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> type: <span class="type">String</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>, <span class="params">type</span>: <span class="type">String</span>) &#123;  <span class="comment">// æŒ‡å®šæ„é€ å™¨</span></span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">        <span class="keyword">self</span>.type <span class="operator">=</span> type</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">convenience</span> <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>) &#123;  <span class="comment">// ä¾¿åˆ©æ„é€ å™¨</span></span><br><span class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(name: name, type: <span class="string">&quot;Unknown&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a <span class="operator">=</span> <span class="type">Animal</span>(name: <span class="string">&quot;Dog&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(a.type)  <span class="comment">// Unknown</span></span><br></pre></td></tr></table></figure>

<p><code>convenience</code> ä¸èƒ½ç›´æ¥åˆå§‹åŒ–å±æ€§ï¼Œå¿…é¡»è°ƒç”¨å¦ä¸€ä¸ª <code>init</code> æ–¹æ³•ã€‚</p>
<h2 id="6-å¿…éœ€æ„é€ å™¨-required"><a href="#6-å¿…éœ€æ„é€ å™¨-required" class="headerlink" title="6. å¿…éœ€æ„é€ å™¨ (required)"></a>6. <strong>å¿…éœ€æ„é€ å™¨ (required)</strong></h2><p>å¦‚æœå¸Œæœ›æ‰€æœ‰å­ç±»éƒ½å¿…é¡»å®ç°æŸä¸ªæ„é€ å™¨ï¼Œå¯ä»¥ä½¿ç”¨ <code>required</code> å…³é”®å­—ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Vehicle</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> speed: <span class="type">Int</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>(<span class="params">speed</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.speed <span class="operator">=</span> speed</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bike</span>: <span class="title class_">Vehicle</span> &#123;</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>(<span class="params">speed</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(speed: speed)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å­ç±»å¿…é¡»å®ç° required æ„é€ å™¨ï¼Œå¦åˆ™ä¼šç¼–è¯‘é”™è¯¯ã€‚</strong></p>
<h2 id="7-Failable-Initializerï¼ˆå¯èƒ½å¤±è´¥çš„æ„é€ å™¨ï¼‰"><a href="#7-Failable-Initializerï¼ˆå¯èƒ½å¤±è´¥çš„æ„é€ å™¨ï¼‰" class="headerlink" title="7. Failable Initializerï¼ˆå¯èƒ½å¤±è´¥çš„æ„é€ å™¨ï¼‰"></a>7. <strong>Failable Initializerï¼ˆå¯èƒ½å¤±è´¥çš„æ„é€ å™¨ï¼‰</strong></h2><p>ä½¿ç”¨ <code>init?</code> æˆ– <code>init!</code> å…è®¸æ„é€ å™¨è¿”å› <code>nil</code>ï¼ˆåˆå§‹åŒ–å¤±è´¥ï¼‰ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init?</span>(<span class="params">name</span>: <span class="type">String</span>) &#123;  </span><br><span class="line">        <span class="keyword">if</span> name.isEmpty &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nil</span>  <span class="comment">// åˆå§‹åŒ–å¤±è´¥</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p1 <span class="operator">=</span> <span class="type">Product</span>(name: <span class="string">&quot;&quot;</span>)  <span class="comment">// nil</span></span><br><span class="line"><span class="keyword">let</span> p2 <span class="operator">=</span> <span class="type">Product</span>(name: <span class="string">&quot;iPhone&quot;</span>)  <span class="comment">// æ­£å¸¸åˆå§‹åŒ–</span></span><br></pre></td></tr></table></figure>

<h2 id="8-deinit-ææ„å™¨"><a href="#8-deinit-ææ„å™¨" class="headerlink" title="8. deinit ææ„å™¨"></a>8. <strong>deinit ææ„å™¨</strong></h2><p>å½“å¯¹è±¡è¢«é”€æ¯æ—¶ï¼Œ<code>deinit</code> ä¼šè¢«è°ƒç”¨ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">FileManager</span> &#123;</span><br><span class="line">    <span class="keyword">init</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;FileManager initialized&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">deinit</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;FileManager deallocated&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> file: <span class="type">FileManager</span>? <span class="operator">=</span> <span class="type">FileManager</span>()  </span><br><span class="line">file <span class="operator">=</span> <span class="literal">nil</span>  <span class="comment">// é‡Šæ”¾å¯¹è±¡ï¼Œè§¦å‘ `deinit`</span></span><br></pre></td></tr></table></figure>

<h3 id="ç»“è®ºï¼š"><a href="#ç»“è®ºï¼š" class="headerlink" title="ç»“è®ºï¼š"></a>ç»“è®ºï¼š</h3><p>Swift çš„ç±»åˆå§‹åŒ–æ–¹å¼ä¸°å¯Œï¼Œä¸»è¦æ–¹å¼åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>æ™®é€šæ„é€ å™¨ init</strong></li>
<li><strong>é»˜è®¤æ„é€ å™¨ï¼ˆé€‚ç”¨äºæœ‰é»˜è®¤å€¼çš„å±æ€§ï¼‰</strong></li>
<li><strong>å¯é€‰å±æ€§åˆå§‹åŒ–</strong></li>
<li><strong>å¤šä¸ªè‡ªå®šä¹‰æ„é€ å™¨</strong></li>
<li><strong>convenience ä¾¿åˆ©æ„é€ å™¨</strong></li>
<li><strong>required å¿…éœ€æ„é€ å™¨</strong></li>
<li><strong>init? å¯èƒ½å¤±è´¥çš„æ„é€ å™¨</strong></li>
<li><strong>deinit ææ„å™¨</strong><br>è¿™äº›ç‰¹æ€§ä½¿å¾— Swift çš„ç±»åˆå§‹åŒ–æ—¢çµæ´»åˆå®‰å…¨ï¼ğŸ¯</li>
</ol>
<h1 id="ç”¨æˆ·é—®é¢˜"><a href="#ç”¨æˆ·é—®é¢˜" class="headerlink" title="ç”¨æˆ·é—®é¢˜"></a>ç”¨æˆ·é—®é¢˜</h1><p> ç±»çš„åˆå§‹åŒ–çš„åº•å±‚åŸç† </p>
<h3 id="Swift-ç±»çš„åˆå§‹åŒ–åº•å±‚åŸç†"><a href="#Swift-ç±»çš„åˆå§‹åŒ–åº•å±‚åŸç†" class="headerlink" title="Swift ç±»çš„åˆå§‹åŒ–åº•å±‚åŸç†"></a><strong>Swift ç±»çš„åˆå§‹åŒ–åº•å±‚åŸç†</strong></h3><p>åœ¨ Swift ä¸­ï¼Œç±»çš„åˆå§‹åŒ–æ˜¯ä¸€ä¸ªå¤æ‚çš„è¿‡ç¨‹ï¼Œæ¶‰åŠ <strong>å†…å­˜åˆ†é…ã€åˆå§‹åŒ–æµç¨‹ã€ç»§æ‰¿ä½“ç³»ã€åŠ¨æ€æ´¾å‘</strong> ç­‰åº•å±‚æœºåˆ¶ã€‚æˆ‘ä»¬å¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢æ¥ç†è§£ Swift ç±»åˆå§‹åŒ–çš„åº•å±‚åŸç†ã€‚</p>
<h2 id="1-ç±»çš„å†…å­˜åˆ†é…"><a href="#1-ç±»çš„å†…å­˜åˆ†é…" class="headerlink" title="1. ç±»çš„å†…å­˜åˆ†é…"></a><strong>1. ç±»çš„å†…å­˜åˆ†é…</strong></h2><p>åœ¨ Swift ä¸­ï¼Œç±»æ˜¯ <strong>å¼•ç”¨ç±»å‹ï¼ˆReference Typeï¼‰</strong>ï¼Œå¯¹è±¡çš„å­˜å‚¨æ–¹å¼å’Œç»“æ„ä½“ä¸åŒï¼š</p>
<ul>
<li><strong>ç±»çš„å®ä¾‹å­˜å‚¨åœ¨å †ï¼ˆHeapï¼‰ä¸­</strong>ï¼Œç”± ARCï¼ˆè‡ªåŠ¨å¼•ç”¨è®¡æ•°ï¼‰ç®¡ç†ã€‚</li>
<li><strong>å®ä¾‹å˜é‡ï¼ˆå±æ€§ï¼‰å­˜å‚¨åœ¨å¯¹è±¡çš„å†…å­˜å—ä¸­</strong>ã€‚</li>
<li><strong>å¯¹è±¡çš„ vtableï¼ˆæ–¹æ³•è¡¨ï¼‰å­˜å‚¨åœ¨ç±»çš„å…ƒæ•°æ®ä¸­</strong>ï¼Œç”¨äºåŠ¨æ€æ´¾å‘æ–¹æ³•è°ƒç”¨ã€‚<br><strong>åˆå§‹åŒ–æ—¶çš„å†…å­˜åˆ†é…è¿‡ç¨‹ï¼š</strong></li>
</ul>
<ol>
<li><strong>swift_allocObject åˆ†é…å†…å­˜</strong>ï¼ˆæ¥è‡ª Swift Runtimeï¼‰ã€‚</li>
<li><strong>é›¶åˆå§‹åŒ–å†…å­˜</strong>ï¼Œæ‰€æœ‰å­˜å‚¨å±æ€§è®¾ç½®ä¸ºé»˜è®¤å€¼ï¼ˆå¦‚ nilã€0 ç­‰ï¼‰ã€‚</li>
<li>**è°ƒç”¨æ„é€ å™¨ init()**ï¼Œè®¾ç½®å®é™…å±æ€§å€¼ã€‚<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>, <span class="params">age</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">        <span class="keyword">self</span>.age <span class="operator">=</span> age</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p <span class="operator">=</span> <span class="type">Person</span>(name: <span class="string">&quot;Tom&quot;</span>, age: <span class="number">25</span>) <span class="comment">// å †ä¸Šåˆ†é…å†…å­˜ï¼Œè°ƒç”¨ init()</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p>åœ¨æ±‡ç¼–å±‚é¢ï¼ŒSwift ä½¿ç”¨ <strong>swift_allocObject</strong> è¿›è¡Œå¯¹è±¡åˆ†é…ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">swift_allocObject(typeMetaData, size, align)</span><br></pre></td></tr></table></figure>

<ul>
<li>typeMetaDataï¼šç±»å‹å…ƒæ•°æ®ï¼ˆmetadataï¼‰ï¼Œç”¨äºå­˜å‚¨ vtable å’Œç±»å‹ä¿¡æ¯ã€‚</li>
<li>sizeï¼šå¯¹è±¡çš„å¤§å°ï¼ˆæ ¹æ®å±æ€§è®¡ç®—ï¼‰ã€‚</li>
<li>alignï¼šå¯¹é½æ–¹å¼ã€‚</li>
</ul>
<h2 id="2-Swift-ç±»çš„åˆå§‹åŒ–æµç¨‹"><a href="#2-Swift-ç±»çš„åˆå§‹åŒ–æµç¨‹" class="headerlink" title="2. Swift ç±»çš„åˆå§‹åŒ–æµç¨‹"></a><strong>2. Swift ç±»çš„åˆå§‹åŒ–æµç¨‹</strong></h2><p>Swift é‡‡ç”¨ <strong>ä¸¤é˜¶æ®µåˆå§‹åŒ–ï¼ˆTwo-Phase Initializationï¼‰</strong> æ¥ä¿è¯å¯¹è±¡çš„å®‰å…¨æ€§ã€‚</p>
<h3 id="é˜¶æ®µ-1ï¼šå­˜å‚¨å±æ€§åˆå§‹åŒ–"><a href="#é˜¶æ®µ-1ï¼šå­˜å‚¨å±æ€§åˆå§‹åŒ–" class="headerlink" title="é˜¶æ®µ 1ï¼šå­˜å‚¨å±æ€§åˆå§‹åŒ–"></a><strong>é˜¶æ®µ 1ï¼šå­˜å‚¨å±æ€§åˆå§‹åŒ–</strong></h3><ol>
<li>è°ƒç”¨ <strong>swift_allocObject</strong> åˆ†é…å¯¹è±¡çš„å†…å­˜ï¼Œå¹¶è®¾ç½®é»˜è®¤å€¼ã€‚</li>
<li>ä¾æ¬¡è°ƒç”¨ç±»å±‚çº§ç»“æ„ä¸­çš„ <strong>init</strong> æ–¹æ³•ï¼Œåˆå§‹åŒ–å±æ€§ã€‚<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> x: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">x</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.x <span class="operator">=</span> x</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;A init&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>: <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> y: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">x</span>: <span class="type">Int</span>, <span class="params">y</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.y <span class="operator">=</span> y  <span class="comment">// âœ… å­ç±»å±æ€§å¿…é¡»å…ˆåˆå§‹åŒ–</span></span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(x: x)  <span class="comment">// âœ… ç„¶åè°ƒç”¨çˆ¶ç±»çš„ `init`</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;B init&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj <span class="operator">=</span> <span class="type">B</span>(x: <span class="number">10</span>, y: <span class="number">20</span>)</span><br><span class="line"><span class="comment">/* è¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment"> A init</span></span><br><span class="line"><span class="comment"> B init</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p>è§„åˆ™ï¼š</p>
<ul>
<li><strong>å­ç±»çš„å­˜å‚¨å±æ€§å¿…é¡»å…ˆåˆå§‹åŒ–</strong>ï¼Œå†è°ƒç”¨ super.init() ã€‚</li>
<li><strong>çˆ¶ç±»çš„ init åªèƒ½åœ¨å­ç±»çš„å±æ€§åˆå§‹åŒ–å®Œæˆåè°ƒç”¨</strong>ã€‚</li>
</ul>
<h3 id="é˜¶æ®µ-2ï¼šå¯¹è±¡å®Œå…¨åˆå§‹åŒ–"><a href="#é˜¶æ®µ-2ï¼šå¯¹è±¡å®Œå…¨åˆå§‹åŒ–" class="headerlink" title="é˜¶æ®µ 2ï¼šå¯¹è±¡å®Œå…¨åˆå§‹åŒ–"></a><strong>é˜¶æ®µ 2ï¼šå¯¹è±¡å®Œå…¨åˆå§‹åŒ–</strong></h3><ol>
<li>init æ–¹æ³•æ‰§è¡Œå®Œæˆï¼Œå®ä¾‹å¯ç”¨ã€‚</li>
<li>å¦‚æœ init æ–¹æ³•æ˜¯ requiredï¼Œå­ç±»å¿…é¡»é‡å†™ã€‚</li>
<li>convenience init åªæ˜¯è¾…åŠ©æ„é€ å™¨ï¼Œæœ€ç»ˆè¦è°ƒç”¨ designated initã€‚</li>
</ol>
<h2 id="3-Swift-çš„åˆå§‹åŒ–æ–¹æ³•åœ¨åº•å±‚çš„è°ƒç”¨è¿‡ç¨‹"><a href="#3-Swift-çš„åˆå§‹åŒ–æ–¹æ³•åœ¨åº•å±‚çš„è°ƒç”¨è¿‡ç¨‹" class="headerlink" title="3. Swift çš„åˆå§‹åŒ–æ–¹æ³•åœ¨åº•å±‚çš„è°ƒç”¨è¿‡ç¨‹"></a><strong>3. Swift çš„åˆå§‹åŒ–æ–¹æ³•åœ¨åº•å±‚çš„è°ƒç”¨è¿‡ç¨‹</strong></h2><p>Swift çš„ <code>init()</code> æ–¹æ³•åœ¨åº•å±‚æ˜¯ <strong>C++ vtableï¼ˆè™šå‡½æ•°è¡¨ï¼‰+ Swift å…ƒæ•°æ®</strong> ç»“åˆçš„å®ç°ã€‚</p>
<p>ä¾‹å¦‚ï¼ŒSwift ç±»åœ¨åº•å±‚è¢«è½¬æ¢ä¸ºç±»ä¼¼ C++ ç»“æ„ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="type">void</span>* isa; <span class="comment">// æŒ‡å‘ç±»çš„å…ƒæ•°æ®</span></span><br><span class="line">    <span class="type">char</span>* name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>åœ¨ <code>init()</code> è¿‡ç¨‹ä¸­ï¼ŒSwift è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š</p>
<ol>
<li><strong>swift_allocObject ç”³è¯·å†…å­˜</strong></li>
<li><strong>é»˜è®¤åˆå§‹åŒ– self</strong></li>
<li><strong>è°ƒç”¨ init() æ„é€ å™¨</strong></li>
<li><strong>å¡«å…… self çš„å±æ€§</strong></li>
<li><strong>è¿”å›å¯¹è±¡</strong><br>åœ¨æ±‡ç¼–å±‚é¢ï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mov r0, #size    // åˆ†é… size å¤§å°çš„å†…å­˜</span><br><span class="line">bl swift_allocObject // è°ƒç”¨ swift_allocObject åˆ†é…å¯¹è±¡</span><br><span class="line">str r0, [sp, #self] // å­˜å‚¨ self æŒ‡é’ˆ</span><br><span class="line">bl _T05PersonC5inityACSS_SitcfC // è°ƒç”¨ init()</span><br></pre></td></tr></table></figure>

<h2 id="4-convenience-init-çš„åº•å±‚è°ƒç”¨"><a href="#4-convenience-init-çš„åº•å±‚è°ƒç”¨" class="headerlink" title="4. convenience init çš„åº•å±‚è°ƒç”¨"></a><strong>4. convenience init çš„åº•å±‚è°ƒç”¨</strong></h2><p>Swift çš„ <strong>convenience init åªæ˜¯è¯­æ³•ç³–</strong>ï¼Œå®ƒæœ€ç»ˆä¼šè°ƒç”¨ <code>init()</code>ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> brand: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> year: <span class="type">Int</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">brand</span>: <span class="type">String</span>, <span class="params">year</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.brand <span class="operator">=</span> brand</span><br><span class="line">        <span class="keyword">self</span>.year <span class="operator">=</span> year</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">convenience</span> <span class="keyword">init</span>(<span class="params">brand</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(brand: brand, year: <span class="number">2020</span>) <span class="comment">// å¿…é¡»è°ƒç”¨å¦ä¸€ä¸ª init()</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åº•å±‚é€»è¾‘ï¼š</p>
<ol>
<li>convenience init <strong>ä¸ä¼šç›´æ¥åˆå§‹åŒ–å­˜å‚¨å±æ€§</strong>ï¼Œå¿…é¡»è°ƒç”¨ init()</li>
<li>init() å…ˆæ‰§è¡Œï¼Œå†æ‰§è¡Œ convenience init<br>åœ¨åº•å±‚çš„è°ƒç”¨é“¾ï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bl _T05CarC5inityACSS_SitcfC   // è°ƒç”¨ init(brand:year:)</span><br><span class="line">bl _T05CarC5inityACSS_tcfc    // convenience init è°ƒç”¨ init()</span><br></pre></td></tr></table></figure>

<h2 id="5-required-init-åœ¨åº•å±‚çš„å®ç°"><a href="#5-required-init-åœ¨åº•å±‚çš„å®ç°" class="headerlink" title="5. required init åœ¨åº•å±‚çš„å®ç°"></a><strong>5. required init åœ¨åº•å±‚çš„å®ç°</strong></h2><p><code>required</code> å…³é”®å­—ç¡®ä¿ <strong>æ‰€æœ‰å­ç±»éƒ½å¿…é¡»å®ç°</strong> è¯¥æ„é€ å™¨ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span>: <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(name: name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨åº•å±‚ï¼š</p>
<ul>
<li>required init é€šè¿‡ <strong>vtable è¿›è¡ŒåŠ¨æ€åˆ†å‘</strong>ï¼Œä»¥ç¡®ä¿å­ç±»å¿…é¡»å®ç°ã€‚<br>åœ¨ Swift Runtime ä¸­ï¼š</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">AnimalVTable</span> &#123;</span><br><span class="line">    <span class="built_in">void</span> (*required_init)(Animal*, String);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>åœ¨æ±‡ç¼–å±‚é¢ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bl _T06AnimalC5inityACSScfc   // è°ƒç”¨ Animal çš„ init()</span><br><span class="line">bl _T03DogC5inityACSScfc      // è°ƒç”¨ Dog çš„ init()</span><br></pre></td></tr></table></figure>

<p>ç”±äº Swift è¿è¡Œæ—¶æ”¯æŒ <strong>åŠ¨æ€æ´¾å‘</strong>ï¼Œ<code>required init</code> ç¡®ä¿å­ç±»å¿…é¡»å®ç°å®ƒã€‚</p>
<h2 id="6-deinit-ææ„å™¨çš„åº•å±‚å®ç°"><a href="#6-deinit-ææ„å™¨çš„åº•å±‚å®ç°" class="headerlink" title="6. deinit ææ„å™¨çš„åº•å±‚å®ç°"></a><strong>6. deinit ææ„å™¨çš„åº•å±‚å®ç°</strong></h2><p>Swift ä½¿ç”¨ ARC ç®¡ç†å¯¹è±¡ï¼Œå½“å¼•ç”¨è®¡æ•°ä¸º <code>0</code> æ—¶ï¼Œè°ƒç”¨ <code>deinit</code> é‡Šæ”¾å¯¹è±¡ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">File</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>) &#123; <span class="keyword">self</span>.name <span class="operator">=</span> name &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">deinit</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;File <span class="subst">\(name)</span> is being deinitialized&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> file: <span class="type">File</span>? <span class="operator">=</span> <span class="type">File</span>(name: <span class="string">&quot;log.txt&quot;</span>)</span><br><span class="line">file <span class="operator">=</span> <span class="literal">nil</span>  <span class="comment">// è§¦å‘ deinit()</span></span><br></pre></td></tr></table></figure>

<p><strong>åº•å±‚è°ƒç”¨</strong></p>
<ol>
<li>swift_release(self) é€’å‡å¼•ç”¨è®¡æ•°ã€‚</li>
<li>deinit() è§¦å‘æ¸…ç†é€»è¾‘ã€‚</li>
<li>swift_deallocObject(self) é‡Šæ”¾å†…å­˜ã€‚<br>åœ¨æ±‡ç¼–å±‚é¢ï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bl swift_release  // é€’å‡å¼•ç”¨è®¡æ•°</span><br><span class="line">cmp r0, #0        // åˆ¤æ–­æ˜¯å¦ä¸º 0</span><br><span class="line">beq _deinit       // å¦‚æœä¸º 0ï¼Œè°ƒç”¨ deinit</span><br><span class="line">bl swift_deallocObject // é‡Šæ”¾å¯¹è±¡</span><br></pre></td></tr></table></figure>

<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h2><ol>
<li><strong>Swift ç±»çš„åˆå§‹åŒ–æ˜¯ä¸¤é˜¶æ®µçš„</strong>ï¼š</li>
</ol>
<ul>
<li>ç¬¬ä¸€é˜¶æ®µï¼šåˆ†é…å†…å­˜ + åˆå§‹åŒ–å­˜å‚¨å±æ€§ã€‚</li>
<li>ç¬¬äºŒé˜¶æ®µï¼šå®Œæˆå¯¹è±¡åˆå§‹åŒ–ï¼Œå…è®¸æ–¹æ³•è°ƒç”¨ã€‚</li>
</ul>
<ol start="2">
<li><strong>åº•å±‚ä¾èµ– swift_allocObject è¿›è¡Œå†…å­˜åˆ†é…</strong>ï¼Œå¹¶é€šè¿‡ <strong>vtable + Swift å…ƒæ•°æ®</strong> è¿›è¡Œæ–¹æ³•åˆ†å‘ã€‚</li>
<li>**convenience init åªæ˜¯è¯­æ³•ç³–ï¼Œæœ€ç»ˆå¿…é¡»è°ƒç”¨ init()**ã€‚</li>
<li><strong>required init å¼ºåˆ¶å­ç±»å®ç°ï¼Œåº•å±‚é€šè¿‡ vtable è¿›è¡ŒåŠ¨æ€æ´¾å‘</strong>ã€‚</li>
<li><strong>deinit ä¾èµ– ARC è¿›è¡Œå¯¹è±¡é‡Šæ”¾ï¼Œè°ƒç”¨ swift_release å’Œ swift_deallocObject</strong>ã€‚<br>Swift çš„åˆå§‹åŒ–æœºåˆ¶<strong>å…¼é¡¾äº†å®‰å…¨æ€§å’Œæ€§èƒ½</strong>ï¼Œé¿å…äº†æœªåˆå§‹åŒ–å¯¹è±¡çš„è®¿é—®é”™è¯¯ï¼Œå¹¶ä¸”ä¼˜åŒ–äº†ç±»çš„å†…å­˜ç®¡ç†ã€‚ğŸš€</li>
</ol>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/swift%E7%BC%96%E7%A8%8B/" rel="tag"># swiftç¼–ç¨‹</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2025/03/02/swift%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6/" rel="prev" title="swifté”™è¯¯å¤„ç†æœºåˆ¶">
      <i class="fa fa-chevron-left"></i> swifté”™è¯¯å¤„ç†æœºåˆ¶
    </a></div>
      <div class="post-nav-item">
    <a href="/2025/03/02/swiftui%E5%B1%9E%E6%80%A7%E5%8C%85%E8%A3%B9%E5%99%A8/" rel="next" title="swiftuiå±æ€§åŒ…è£¹å™¨">
      swiftuiå±æ€§åŒ…è£¹å™¨ <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#swift-%E4%B8%AD%E7%B1%BB%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-text">swift ä¸­ç±»çš„åˆå§‹åŒ–</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E5%9F%BA%E6%9C%AC%E6%9E%84%E9%80%A0%E5%99%A8"><span class="nav-text">1. åŸºæœ¬æ„é€ å™¨</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E9%BB%98%E8%AE%A4%E6%9E%84%E9%80%A0%E5%99%A8%EF%BC%88Default-Initializer%EF%BC%89"><span class="nav-text">2. é»˜è®¤æ„é€ å™¨ï¼ˆDefault Initializerï¼‰</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E5%8F%AF%E9%80%89%E5%B1%9E%E6%80%A7%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-text">3. å¯é€‰å±æ€§çš„åˆå§‹åŒ–</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%9E%84%E9%80%A0%E5%99%A8%EF%BC%88Custom-Initializer%EF%BC%89"><span class="nav-text">4. è‡ªå®šä¹‰æ„é€ å™¨ï¼ˆCustom Initializerï¼‰</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-convenience-%E4%BE%BF%E5%88%A9%E6%9E%84%E9%80%A0%E5%99%A8"><span class="nav-text">5. convenience ä¾¿åˆ©æ„é€ å™¨</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-%E5%BF%85%E9%9C%80%E6%9E%84%E9%80%A0%E5%99%A8-required"><span class="nav-text">6. å¿…éœ€æ„é€ å™¨ (required)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-Failable-Initializer%EF%BC%88%E5%8F%AF%E8%83%BD%E5%A4%B1%E8%B4%A5%E7%9A%84%E6%9E%84%E9%80%A0%E5%99%A8%EF%BC%89"><span class="nav-text">7. Failable Initializerï¼ˆå¯èƒ½å¤±è´¥çš„æ„é€ å™¨ï¼‰</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-deinit-%E6%9E%90%E6%9E%84%E5%99%A8"><span class="nav-text">8. deinit ææ„å™¨</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%93%E8%AE%BA%EF%BC%9A"><span class="nav-text">ç»“è®ºï¼š</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E9%97%AE%E9%A2%98"><span class="nav-text">ç”¨æˆ·é—®é¢˜</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Swift-%E7%B1%BB%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86"><span class="nav-text">Swift ç±»çš„åˆå§‹åŒ–åº•å±‚åŸç†</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E7%B1%BB%E7%9A%84%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D"><span class="nav-text">1. ç±»çš„å†…å­˜åˆ†é…</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-Swift-%E7%B1%BB%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E6%B5%81%E7%A8%8B"><span class="nav-text">2. Swift ç±»çš„åˆå§‹åŒ–æµç¨‹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%98%B6%E6%AE%B5-1%EF%BC%9A%E5%AD%98%E5%82%A8%E5%B1%9E%E6%80%A7%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-text">é˜¶æ®µ 1ï¼šå­˜å‚¨å±æ€§åˆå§‹åŒ–</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%98%B6%E6%AE%B5-2%EF%BC%9A%E5%AF%B9%E8%B1%A1%E5%AE%8C%E5%85%A8%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-text">é˜¶æ®µ 2ï¼šå¯¹è±¡å®Œå…¨åˆå§‹åŒ–</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-Swift-%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E6%96%B9%E6%B3%95%E5%9C%A8%E5%BA%95%E5%B1%82%E7%9A%84%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B"><span class="nav-text">3. Swift çš„åˆå§‹åŒ–æ–¹æ³•åœ¨åº•å±‚çš„è°ƒç”¨è¿‡ç¨‹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-convenience-init-%E7%9A%84%E5%BA%95%E5%B1%82%E8%B0%83%E7%94%A8"><span class="nav-text">4. convenience init çš„åº•å±‚è°ƒç”¨</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-required-init-%E5%9C%A8%E5%BA%95%E5%B1%82%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="nav-text">5. required init åœ¨åº•å±‚çš„å®ç°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-deinit-%E6%9E%90%E6%9E%84%E5%99%A8%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0"><span class="nav-text">6. deinit ææ„å™¨çš„åº•å±‚å®ç°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-text">æ€»ç»“</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">YiDa</p>
  <div class="site-description" itemprop="description">è‡ªå¤äººç”Ÿäºä¸–ï¼Œé¡»æœ‰ä¸€æŠ€ä¹‹èƒ½ï¼›æˆ‘è¾ˆæ—¢åŠ¡æ–¯ä¸šï¼Œä¾¿å½“ä¸“å¿ƒç”¨åŠŸï¼›ä»¥ååæ‰¬å››æµ·ï¼Œæ ¹æ®å³åœ¨å¹´è½»ã€‚</div>
</div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2023 â€“ 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">YiDa</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>

<script src="/js/utils.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>

---
title: è½¯ä»¶å¼€å‘æµ‹è¯•çš„åŸºæœ¬åˆ†ç±»
date: 2025-04-23 14:50:22
tags: [swiftç¼–ç¨‹,è½¯ä»¶æµ‹è¯•]
---



# unit testã€integration testã€UI testã€performance test çš„åŒºåˆ«ä¸è”ç³»
è¿™äº›æµ‹è¯•ç±»å‹éƒ½æ˜¯è½¯ä»¶æµ‹è¯•ä½“ç³»ä¸­çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå„è‡ªæœ‰ä¸åŒçš„ä¾§é‡ç‚¹ï¼Œä¸‹é¢æ˜¯å®ƒä»¬çš„ **åŒºåˆ«ä¸è”ç³»**ï¼š



## âœ… ä¸€ã€åŒºåˆ«

<!--more-->
| ç±»å‹ | æµ‹è¯•å¯¹è±¡/èŒƒå›´ | ç›®çš„ | ä¾‹å­ |
| ---- | ---- | ---- | ---- |
| **Unit Test** ï¼ˆå•å…ƒæµ‹è¯•ï¼‰ | å•ä¸ªå‡½æ•°æˆ–ç±»ç­‰æœ€å°åŠŸèƒ½å•å…ƒ | éªŒè¯æœ€å°é€»è¾‘å•å…ƒæ˜¯å¦æŒ‰é¢„æœŸè¿è¡Œ | æµ‹è¯•ä¸€ä¸ªå‡½æ•°æ˜¯å¦æ­£ç¡®è®¡ç®—ä¸¤ä¸ªæ•°çš„å’Œ |
| **Integration Test** ï¼ˆé›†æˆæµ‹è¯•ï¼‰ | å¤šä¸ªæ¨¡å—æˆ–æœåŠ¡ä¹‹é—´çš„äº¤äº’ | æ£€æŸ¥æ¨¡å—ä¹‹é—´çš„æ¥å£ã€ä¾èµ–æ˜¯å¦æ­£ç¡®é›†æˆ | æµ‹è¯•æ•°æ®åº“è®¿é—®æ¨¡å—å’Œä¸šåŠ¡é€»è¾‘æ¨¡å—çš„é›†æˆ |
| **UI Test** ï¼ˆç”¨æˆ·ç•Œé¢æµ‹è¯•ï¼‰ | å®Œæ•´çš„å‰ç«¯ç•Œé¢åŠç”¨æˆ·æ“ä½œæµç¨‹ | éªŒè¯ UI å±•ç¤ºæ­£ç¡®ã€ç”¨æˆ·äº¤äº’æ˜¯å¦ç¬¦åˆé¢„æœŸ | è‡ªåŠ¨ç‚¹å‡»æŒ‰é’®å¹¶éªŒè¯è·³è½¬é¡µé¢æ­£ç¡® |
| **Performance Test**ï¼ˆæ€§èƒ½æµ‹è¯•ï¼‰ | æ•´ä¸ªç³»ç»Ÿæˆ–å…³é”®æ¨¡å— | éªŒè¯ç³»ç»Ÿçš„å“åº”æ—¶é—´ã€å¹¶å‘å¤„ç†èƒ½åŠ›ã€ç¨³å®šæ€§ç­‰ | å‹æµ‹ç™»å½•æ¥å£æ”¯æŒå¤šå°‘ QPSï¼ˆæ¯ç§’è¯·æ±‚ï¼‰ |



## ğŸ”— äºŒã€è”ç³»


- **ä»å°åˆ°å¤§**ï¼šè¿™äº›æµ‹è¯•å¾€å¾€ä»åº•å±‚å•å…ƒæµ‹è¯•é€æ­¥æ‰©å±•ï¼š


å•å…ƒæµ‹è¯• â†’ é›†æˆæµ‹è¯• â†’ UIæµ‹è¯• â†’ æ€§èƒ½æµ‹è¯•
- **æµ‹è¯•é‡‘å­—å¡”**ï¼šåœ¨å®é™…å¼€å‘ä¸­ï¼Œæ¨èçš„æµ‹è¯•ç»“æ„åƒé‡‘å­—å¡”ä¸€æ ·ï¼š


åº•å±‚å¤§é‡å•å…ƒæµ‹è¯•ï¼ˆå¿«ã€ç¨³å®šï¼‰


ä¸­å±‚é€‚é‡é›†æˆæµ‹è¯•


é¡¶å±‚å°‘é‡ UI æµ‹è¯•ï¼ˆæ…¢ã€æ˜“ç¢ï¼‰
- **éƒ½æ˜¯ä¿éšœè´¨é‡çš„æ‰‹æ®µ**ï¼Œä¾§é‡ç‚¹ä¸åŒï¼Œä½†éƒ½æœåŠ¡äºï¼š


æé«˜ä»£ç è´¨é‡


å‘ç° bug


é™ä½å›å½’æµ‹è¯•æˆæœ¬


æ”¯æŒæŒç»­é›†æˆ/æŒç»­éƒ¨ç½²ï¼ˆCI/CDï¼‰


## ğŸ“Œ ç±»æ¯”è®°å¿†æ³•


- **Unit Test**ï¼šåƒåŒ»ç”Ÿåšä½“æ£€ï¼Œæ£€æŸ¥ä¸€ä¸ªå™¨å®˜ï¼ˆå•å…ƒï¼‰æ˜¯å¦å¥åº·ã€‚
- **Integration Test**ï¼šæ£€æŸ¥å„ä¸ªå™¨å®˜èƒ½å¦åè°ƒå·¥ä½œã€‚
- **UI Test**ï¼šæ¨¡æ‹Ÿç—…äººæ—¥å¸¸ç”Ÿæ´»ï¼Œçœ‹æ˜¯å¦èƒ½æ­£å¸¸ç”Ÿæ´»ã€‚
- **Performance Test**ï¼šè®©ç—…äººè·‘æ­¥è·³è·ƒï¼Œæµ‹è¯•æé™ã€‚




# ä»¥ Swift + Flask ç›¸å…³çš„æµ‹è¯•å®è·µä¸ºä¾‹
ç»“åˆä½ æ­£åœ¨å¼€å‘çš„ SwiftUI + Flask è§†é¢‘åº”ç”¨é¡¹ç›®ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä»¥ä¸‹å››ç§æµ‹è¯•ç±»å‹æ¥æ¢³ç†æµ‹è¯•å®è·µï¼š



## âœ… 1. **Unit Testï¼ˆå•å…ƒæµ‹è¯•ï¼‰**


### ğŸ”¹ Swiftï¼ˆå‰ç«¯ï¼‰


ä½¿ç”¨ Xcode è‡ªå¸¦çš„ `XCTest` æ¡†æ¶ï¼Œæµ‹è¯• SwiftUI ä¸­çš„æ¨¡å‹ã€è§†å›¾æ¨¡å‹ï¼ˆViewModelï¼‰ç­‰é€»è¾‘ä»£ç ã€‚


#### ç¤ºä¾‹ï¼š


```swift
func testVideoModelInit() {
    let video = Video(id: 1, title: "æµ‹è¯•è§†é¢‘", likes: 10)
    XCTAssertEqual(video.title, "æµ‹è¯•è§†é¢‘")
    XCTAssertEqual(video.likes, 10)
}
```


### ğŸ”¹ Flaskï¼ˆåç«¯ï¼‰


ç”¨ `unittest` æˆ– `pytest` æµ‹è¯• Flask ä¸­çš„æœåŠ¡å‡½æ•°ã€æ•°æ®åº“è®¿é—®ç­‰ã€‚


#### ç¤ºä¾‹ï¼š


```python
def test_get_video_by_id():
    with app.test_client() as client:
        response = client.get('/api/video/1')
        assert response.status_code == 200
        assert response.json['id'] == 1
```



## âœ… 2. **Integration Testï¼ˆé›†æˆæµ‹è¯•ï¼‰**


### ğŸ”¹ Swift


æµ‹è¯•å‰ç«¯è°ƒç”¨åç«¯ API æ˜¯å¦æ­£å¸¸ï¼Œæ¨èä½¿ç”¨ `URLSession` æ­é… mock æˆ– stubï¼ˆæµ‹è¯•æœåŠ¡å™¨ï¼‰ã€‚


#### ç¤ºä¾‹ï¼ˆç»“åˆ XCTestï¼‰ï¼š


```swift
func testFetchVideoList() async throws {
    let service = VideoService()
    let videos = try await service.fetchVideos()
    XCTAssertGreaterThan(videos.count, 0)
}
```


### ğŸ”¹ Flask


ä½¿ç”¨ Flask çš„ `test_client` æ¨¡æ‹Ÿè¯·æ±‚ï¼Œè¿é€šæ•°æ®åº“ï¼Œæ£€æŸ¥é€»è¾‘æ˜¯å¦æ‰“é€šã€‚


#### ç¤ºä¾‹ï¼š


```python
def test_video_upload_and_fetch():
    client = app.test_client()
    upload_resp = client.post('/api/upload', data={'title': 'test'})
    assert upload_resp.status_code == 200
    fetch_resp = client.get('/api/video/list')
    assert any(v['title'] == 'test' for v in fetch_resp.json)
```



## âœ… 3. **UI Testï¼ˆç”¨æˆ·ç•Œé¢æµ‹è¯•ï¼‰**


### ğŸ”¹ Swiftï¼ˆæ¨èä½¿ç”¨ XCUITestï¼‰


ç”¨äºæ¨¡æ‹Ÿç”¨æˆ·æ»‘åŠ¨è§†é¢‘ã€ç‚¹å‡»ç‚¹èµæŒ‰é’®ã€æœç´¢æ“ä½œç­‰ã€‚


#### ç¤ºä¾‹ï¼š


```swift
func testLikeButtonTaps() {
    let app = XCUIApplication()
    app.launch()
    
    let likeButton = app.buttons["likeButton"]
    likeButton.tap()
    
    XCTAssert(app.staticTexts["likesCount"].exists)
}
```



## âœ… 4. **Performance Testï¼ˆæ€§èƒ½æµ‹è¯•ï¼‰**


### ğŸ”¹ Swiftï¼ˆXcode æä¾›æ€§èƒ½æµ‹è¯•æ¨¡æ¿ï¼‰


```swift
func testVideoDecodingPerformance() {
    self.measure {
        _ = try? JSONDecoder().decode([Video].self, from: mockJSONData)
    }
}
```


### ğŸ”¹ Flaskï¼ˆä½¿ç”¨ locust, wrk, ab ç­‰å‹æµ‹å·¥å…·ï¼‰


å¯ä»¥å‹æµ‹æŸæ¥å£çš„ååé‡ã€å“åº”æ—¶é—´ï¼š


```bash
ab -n 1000 -c 100 http://localhost:5000/api/video/list
```



## ğŸ”„ æµç¨‹å»ºè®®ï¼šCI/CDé›†æˆ


ä½ å¯ä»¥è®¾ç½®å¦‚ä¸‹é¡ºåºçš„è‡ªåŠ¨åŒ–æµ‹è¯•æµç¨‹ï¼ˆå»ºè®®é…åˆ GitHub Actions / GitLab CIï¼‰ï¼š


1. âœ… å‰ç«¯å•å…ƒæµ‹è¯•ï¼ˆSwiftï¼‰
2. âœ… åç«¯å•å…ƒæµ‹è¯•ï¼ˆFlaskï¼‰
3. âœ… é›†æˆæµ‹è¯•ï¼ˆå‰åç«¯ API å¯¹æ¥ï¼‰
4. âœ… UI è‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆå‰ç«¯ï¼‰
5. âœ… æ€§èƒ½æµ‹è¯•ï¼ˆä¸Šçº¿å‰æ‰‹åŠ¨è·‘ï¼‰

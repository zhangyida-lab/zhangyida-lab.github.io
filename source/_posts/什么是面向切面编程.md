---
title: 什么是面向切面编程
date: 2025-09-01 16:58:40
tags:
---
# 什么时面向切面编程

 **面向切面编程（AOP, Aspect Oriented Programming）**。



## 1️⃣ 背景：为什么需要 AOP


在传统编程中，有些功能会分散在系统的很多地方反复出现，例如：

<!--more-->
- 日志记录（Logging）
- 权限控制（Security）
- 性能监控（Profiling）
- 事务管理（Transaction）

这些功能不属于具体的业务逻辑，但又对系统非常重要。
如果我们在每个方法里都去写日志、做权限校验，就会造成 **代码重复、难以维护**。



## 2️⃣ 什么是 AOP


AOP 就是 **把这些与业务逻辑无关、却对多个模块都需要的功能**（称为**横切关注点 cross-cutting concerns**）
从业务逻辑代码中抽取出来，形成一个单独的“切面（Aspect）”。


这样，业务代码只管业务，日志、事务、权限等统一交给 AOP 处理。


👉 可以理解为：


- OOP（面向对象）= 解决“对象的功能划分”
- AOP（面向切面）= 解决“跨越多个对象的共性功能”


## 3️⃣ 核心概念


在 Spring AOP 中，主要有以下几个概念：


- **Aspect（切面）**
横切关注点的模块化，比如“日志切面”“事务切面”。
- **Join Point（连接点）**
程序执行的某个点，比如方法调用、异常抛出等。
- **Pointcut（切点）**
定义在哪些 Join Point 上织入代码，比如“所有 `@Service` 注解的方法”。
- **Advice（通知）**
在切点位置要做的动作，比如“方法执行前打印日志”。


前置通知（Before）


后置通知（After）


返回后通知（AfterReturning）


异常通知（AfterThrowing）


环绕通知（Around）
- **Weaving（织入）**
把切面应用到目标对象上，生成代理对象。


## 4️⃣ 举个例子（Spring AOP）


比如我有一个业务方法：


```java
@Service
public class OrderService {
    public void createOrder() {
        System.out.println("创建订单...");
    }
}

```

需求：每次调用 `createOrder` 方法前后都记录日志。
如果不用 AOP，可能要手写日志：


```java
public void createOrder() {
    System.out.println("开始日志");
    System.out.println("创建订单...");
    System.out.println("结束日志");
}

```

有了 AOP，可以写一个切面类：


```java
@Aspect
@Component
public class LogAspect {

    @Before("execution(* com.example.service.OrderService.createOrder(..))")
    public void beforeLog() {
        System.out.println("开始日志");
    }

    @After("execution(* com.example.service.OrderService.createOrder(..))")
    public void afterLog() {
        System.out.println("结束日志");
    }
}

```

👉 这样业务类 `OrderService` 就不用管日志的事了，日志逻辑由 AOP 自动“织入”。



## 5️⃣ 总结


- **AOP = 解耦“业务逻辑”和“系统级服务”**
- 把日志、事务、安全这些“横切关注点”从业务逻辑中抽离出来，统一管理。
- Spring AOP 底层基于 **动态代理（JDK Proxy、CGLIB）** 实现。
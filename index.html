<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=PingFang SC:300,300italic,400,400italic,700,700italic|consolas:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","Muse | Mist":320,"display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"default"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="自古人生于世，须有一技之能；我辈既务斯业，便当专心用功；以后名扬四海，根据即在年轻。">
<meta property="og:type" content="website">
<meta property="og:title" content="Yi&#39;s Lab">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Yi&#39;s Lab">
<meta property="og:description" content="自古人生于世，须有一技之能；我辈既务斯业，便当专心用功；以后名扬四海，根据即在年轻。">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="YiDa">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Yi's Lab</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Yi's Lab</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">You Find Your Own Tree.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section">首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section">关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section">标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section">分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section">归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger">搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/zhangyida-lab" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/09/01/iosProgramming/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="YiDa">
      <meta itemprop="description" content="自古人生于世，须有一技之能；我辈既务斯业，便当专心用功；以后名扬四海，根据即在年轻。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yi's Lab">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/09/01/iosProgramming/" class="post-title-link" itemprop="url">iosProgramming</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-09-01 17:36:04" itemprop="dateCreated datePublished" datetime="2025-09-01T17:36:04+09:00">2025-09-01</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index"><span itemprop="name">编程语言</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>老当益壮，宁移白首之心；穷且益坚，不坠青云之志。——《滕王阁序》<br>UIKit construct and manage a graphical, event-driven user interface for your iOS, iPadOS, or tvOS app.——Apple</p>
</blockquote>
<p><img src="/2025/09/01/iosProgramming/iosProgramming01.jpg" alt="iosProgramming01"></p>
<h2 id="The-View-Hierarchy"><a href="#The-View-Hierarchy" class="headerlink" title="The View Hierarchy"></a>The View Hierarchy</h2><ul>
<li><p>The View Hierarchy<br>Every application has a single instance of UIWindow that serves as the container for all the views in the<br>application. UIWindow is a subclass of UIView, so the window is itself a view. The window is created<br>when the application launches. Once the window is created, other views can be added to it.</p>
</li>
<li><p>add view program</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2025/09/01/iosProgramming/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/09/01/SetupYourBlogByGithubAndHexo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="YiDa">
      <meta itemprop="description" content="自古人生于世，须有一技之能；我辈既务斯业，便当专心用功；以后名扬四海，根据即在年轻。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yi's Lab">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/09/01/SetupYourBlogByGithubAndHexo/" class="post-title-link" itemprop="url">How to setup your hexo blog</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-09-01 17:36:04" itemprop="dateCreated datePublished" datetime="2025-09-01T17:36:04+09:00">2025-09-01</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" itemprop="url" rel="index"><span itemprop="name">博客搭建</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>悟已往之不谏，知来者之可追。实迷途其未远，觉今是而昨非。——《归去来辞》<br><em>Hexo can help us to write blog by markdown,and then we can deploy my blog on github or other srevice.</em><br><img src="/2025/09/01/SetupYourBlogByGithubAndHexo/blog.jpg" alt="blog"></p>
</blockquote>
<h2 id="What-is-github-page"><a href="#What-is-github-page" class="headerlink" title="What is github page?"></a><a target="_blank" rel="noopener" href="https://docs.github.com/en/pages/getting-started-with-github-pages/about-github-pages">What is github page?</a></h2><blockquote>
<p>GitHub Pages is a static site hosting service that takes HTML, CSS, and JavaScript files straight from a repository on GitHub, optionally runs the files through a build process, and publishes a website. you can set up what branch will the github page use,so that we can use deploy different branch,one branch to deploy our site,the other to write blog.</p>
</blockquote>
<h2 id="What-is-hexo"><a href="#What-is-hexo" class="headerlink" title="What is hexo?"></a><a target="_blank" rel="noopener" href="https://hexo.io/docs/">What is hexo?</a></h2>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2025/09/01/SetupYourBlogByGithubAndHexo/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/09/01/JAR%E5%92%8CWAR%E7%9A%84%E5%8C%BA%E5%88%AB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="YiDa">
      <meta itemprop="description" content="自古人生于世，须有一技之能；我辈既务斯业，便当专心用功；以后名扬四海，根据即在年轻。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yi's Lab">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/09/01/JAR%E5%92%8CWAR%E7%9A%84%E5%8C%BA%E5%88%AB/" class="post-title-link" itemprop="url">JAR和WAR的区别</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-09-01 16:43:02 / 修改时间：17:44:04" itemprop="dateCreated datePublished" datetime="2025-09-01T16:43:02+09:00">2025-09-01</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="jar包和war包的区别"><a href="#jar包和war包的区别" class="headerlink" title="jar包和war包的区别"></a>jar包和war包的区别</h1><h2 id="1-定义"><a href="#1-定义" class="headerlink" title="1. 定义"></a>1. 定义</h2><ul>
<li><strong>JAR（Java ARchive）包</strong></li>
</ul>
<p>是一种 <strong>Java 类库打包格式</strong>。</p>
<p>主要用来 <strong>打包 Java 类文件、配置文件、资源文件（图片、音频等）</strong>。</p>
<p>常见场景：发布 Java 库、工具包，或者 Spring Boot 打包成可运行的 JAR。</p>
<ul>
<li><strong>WAR（Web Application ARchive）包</strong></li>
</ul>
<p>是一种 <strong>Web 应用打包格式</strong>。</p>
<p>用于把一个 <strong>Web 应用（Servlet、JSP、HTML、JS、CSS、图片、WEB-INF 配置等）</strong> 打包成一个整体。</p>
<p>常见场景：部署到 Web 服务器（如 Tomcat、Jetty、JBoss）。</p>
<h2 id="2-文件结构差异"><a href="#2-文件结构差异" class="headerlink" title="2. 文件结构差异"></a>2. 文件结构差异</h2><h3 id="JAR-包结构（普通-Java-应用）"><a href="#JAR-包结构（普通-Java-应用）" class="headerlink" title="JAR 包结构（普通 Java 应用）"></a>JAR 包结构（普通 Java 应用）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">myapp.jar</span><br><span class="line"> ├── META-INF/</span><br><span class="line"> │    └── MANIFEST.MF   （清单文件，可指定主类 Main-Class）</span><br><span class="line"> ├── com/</span><br><span class="line"> │    └── example/...</span><br><span class="line"> └── 资源文件</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="WAR-包结构（Web-应用）"><a href="#WAR-包结构（Web-应用）" class="headerlink" title="WAR 包结构（Web 应用）"></a>WAR 包结构（Web 应用）</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">myapp.war</span><br><span class="line"> ├── META-INF/</span><br><span class="line"> ├── WEB-INF/</span><br><span class="line"> │    ├── web.xml           （Web 应用配置文件，Servlet/<span class="keyword">Filter</span>/Listener）</span><br><span class="line"> │    ├── classes/          （编译好的字节码 .<span class="keyword">class</span> 文件）</span><br><span class="line"> │    └── lib/              （依赖的 JAR 包）</span><br><span class="line"> ├── <span class="keyword">index</span>.jsp              （JSP 页面）</span><br><span class="line"> ├── static/                （静态资源，HTML/JS/CSS/图片）</span><br><span class="line"> └── 其他资源</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="3-部署方式"><a href="#3-部署方式" class="headerlink" title="3. 部署方式"></a>3. 部署方式</h2><ul>
<li><strong>JAR 包</strong></li>
</ul>
<p>可以直接运行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java -jar myapp.jar</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>常见于 <strong>Spring Boot</strong> 应用（内嵌 Tomcat&#x2F;Jetty，不需要单独部署）。</p>
<ul>
<li><strong>WAR 包</strong></li>
</ul>
<p>需要放到应用服务器（Tomcat、JBoss、WebLogic）里运行。</p>
<p>例如：把 <code>myapp.war</code> 放到 <code>Tomcat/webapps/</code> 下，启动 Tomcat 后访问应用。</p>
<h2 id="4-典型应用场景"><a href="#4-典型应用场景" class="headerlink" title="4. 典型应用场景"></a>4. 典型应用场景</h2><ul>
<li><strong>JAR 包</strong></li>
</ul>
<p>工具类库（比如 MyBatis.jar、mysql-connector.jar）</p>
<p>独立运行的应用（Spring Boot 项目常用）</p>
<ul>
<li><strong>WAR 包</strong></li>
</ul>
<p>传统 Java Web 项目（Servlet、JSP、Struts、Spring MVC 等）</p>
<p>部署到企业级 Web 容器中</p>
<p>✅ <strong>总结一句话</strong>：</p>
<ul>
<li><strong>JAR</strong> &#x3D; Java 程序或库，通常可执行或供别人调用。</li>
<li><strong>WAR</strong> &#x3D; Web 应用程序，必须运行在 Web 服务器中（除非是 Spring Boot 这种“可执行 WAR”）。</li>
</ul>
<p>要不要我顺便给你画一个 <strong>JAR 与 WAR 的对比图表</strong>，一目了然？</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/08/31/%E4%B8%AD%E9%97%B4%E4%BB%B6%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E7%94%A8%E6%B3%A8%E5%86%8C%E5%9C%A8Nacos/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="YiDa">
      <meta itemprop="description" content="自古人生于世，须有一技之能；我辈既务斯业，便当专心用功；以后名扬四海，根据即在年轻。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yi's Lab">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/08/31/%E4%B8%AD%E9%97%B4%E4%BB%B6%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E7%94%A8%E6%B3%A8%E5%86%8C%E5%9C%A8Nacos/" class="post-title-link" itemprop="url">中间件为什么不用注册在Nacos</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-08-31 10:31:48" itemprop="dateCreated datePublished" datetime="2025-08-31T10:31:48+09:00">2025-08-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-09-01 17:36:04" itemprop="dateModified" datetime="2025-09-01T17:36:04+09:00">2025-09-01</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="中间件为什么不用注册在Nacos"><a href="#中间件为什么不用注册在Nacos" class="headerlink" title="中间件为什么不用注册在Nacos"></a>中间件为什么不用注册在Nacos</h1><p><strong>“应用服务要注册到 Nacos，为什么中间件（MySQL、Redis、Kafka、RocketMQ、MinIO、ELK 等）不直接注册到 Nacos 呢？”</strong></p>
<h2 id="1-微服务注册中心的定位（以-Nacos-为例）"><a href="#1-微服务注册中心的定位（以-Nacos-为例）" class="headerlink" title="1. 微服务注册中心的定位（以 Nacos 为例）"></a>1. 微服务注册中心的定位（以 Nacos 为例）</h2><p>Nacos 的核心能力是 <strong>服务发现 + 配置管理</strong>，解决的是：</p>
<ul>
<li>服务实例 <strong>动态上下线</strong>（容器、Pod、进程随时可能挂掉&#x2F;扩缩容）。</li>
<li>调用方无需关心具体地址，只需要知道服务名（如 <code>approval-service</code>）。</li>
<li>客户端 SDK 或网关根据服务名向 Nacos 查询可用实例地址。</li>
</ul>
<p>👉 Nacos 最适合管理 <strong>弹性伸缩、生命周期不确定的应用服务</strong>。</p>
<h2 id="2-中间件的特性"><a href="#2-中间件的特性" class="headerlink" title="2. 中间件的特性"></a>2. 中间件的特性</h2><p>对比一下中间件（数据库、MQ、缓存、存储）：</p>
<ul>
<li><strong>部署方式</strong>：</li>
</ul>
<p>通常是 <strong>独立部署</strong>，数量有限（1~3 节点、或者固定集群）。</p>
<p>IP&#x2F;端口 <strong>稳定</strong>（比如 MySQL 固定在 <code>10.0.0.5:3306</code>）。</p>
<ul>
<li><strong>客户端交互方式</strong>：</li>
</ul>
<p>大多数中间件都有自己的 <strong>连接协议&#x2F;客户端 SDK</strong>。</p>
<p>客户端会内建“集群发现机制”（比如 RocketMQ 依赖 NameServer，Kafka 有自己的 Broker 元数据协议）。</p>
<p>不需要通过 Nacos 再做代理。</p>
<ul>
<li><strong>角色不对等</strong>：</li>
</ul>
<p>中间件不是“调用者—被调用者”的对等关系，而是基础设施。</p>
<p>一旦中间件地址换了，一般通过 <strong>配置中心</strong> 通知应用即可（而不是动态发现）。</p>
<h2 id="3-为什么不直接注册到-Nacos"><a href="#3-为什么不直接注册到-Nacos" class="headerlink" title="3. 为什么不直接注册到 Nacos"></a>3. 为什么不直接注册到 Nacos</h2><ul>
<li><strong>没必要</strong><br>中间件不会频繁上下线，地址相对固定，用配置中心（Nacos Config）下发即可。</li>
<li><strong>发现方式不兼容</strong><br>中间件往往有自己的发现机制（RocketMQ → NameServer，Kafka → Broker 元数据，Redis → Sentinel&#x2F;Cluster，ElasticSearch → 节点自发现）。<br>即使你把中间件注册到 Nacos，客户端 SDK 也用不上这些信息。</li>
<li><strong>职责分离</strong><br>Nacos 管理“业务服务发现”；<br>中间件用它们自己的集群管理&#x2F;注册机制。</li>
</ul>
<h2 id="4-那么中间件的地址怎么管理？"><a href="#4-那么中间件的地址怎么管理？" class="headerlink" title="4. 那么中间件的地址怎么管理？"></a>4. 那么中间件的地址怎么管理？</h2><p>在实际项目里有两种常见做法：</p>
<ol>
<li><strong>写死配置（小规模环境）</strong></li>
</ol>
<ul>
<li>例如 <code>spring.datasource.url=jdbc:mysql://10.0.0.5:3306/approval</code></li>
<li>适合单机开发环境。</li>
</ul>
<ol start="2">
<li><strong>通过配置中心（推荐）</strong></li>
</ol>
<ul>
<li>中间件的连接串、用户名密码等敏感配置，放在 <strong>Nacos Config</strong> 或 <strong>Apollo</strong> 等配置中心。</li>
<li>应用启动时读取配置，动态感知更新（如数据库主从切换）。</li>
</ul>
<p>👉 所以中间件虽然不“注册到 Nacos”，但 <strong>可以把它的连接信息托管到 Nacos Config</strong>，这也是常见最佳实践。</p>
<h2 id="5-总结一句"><a href="#5-总结一句" class="headerlink" title="5. 总结一句"></a>5. 总结一句</h2><ul>
<li><strong>应用服务</strong>：动态上下线 → <strong>注册到 Nacos（服务发现）</strong>。</li>
<li><strong>中间件服务</strong>：集群稳定、自带发现 → <strong>不注册到 Nacos</strong>，只在 <strong>配置中心管理连接信息</strong>。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/08/31/%E6%97%A5%E5%BF%97%E5%A4%84%E7%90%86%E7%9A%84%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="YiDa">
      <meta itemprop="description" content="自古人生于世，须有一技之能；我辈既务斯业，便当专心用功；以后名扬四海，根据即在年轻。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yi's Lab">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/08/31/%E6%97%A5%E5%BF%97%E5%A4%84%E7%90%86%E7%9A%84%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B/" class="post-title-link" itemprop="url">日志处理的整体流程</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-08-31 10:30:05" itemprop="dateCreated datePublished" datetime="2025-08-31T10:30:05+09:00">2025-08-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-09-01 17:36:04" itemprop="dateModified" datetime="2025-09-01T17:36:04+09:00">2025-09-01</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="🔎-ELK-日志处理的整体流程"><a href="#🔎-ELK-日志处理的整体流程" class="headerlink" title="🔎 ELK 日志处理的整体流程"></a>🔎 ELK 日志处理的整体流程</h1><ol>
<li><strong>日志产生</strong></li>
</ol>
<ul>
<li>各种应用（比如你的基础平台服务、流程审批服务）、中间件（Kafka、MySQL、Nacos 等）不断产生日志文件或标准输出。</li>
</ul>
<ol start="2">
<li><strong>日志采集（Logstash &#x2F; Beats）</strong></li>
</ol>
<ul>
<li><strong>Filebeat &#x2F; Logstash</strong> 读取日志文件或接受日志流。</li>
<li>可以在这里做 <strong>过滤、格式化、解析 JSON</strong> 等预处理。</li>
</ul>
<ol start="3">
<li><strong>日志传输到 Elasticsearch</strong></li>
</ol>
<ul>
<li>处理好的日志被发送到 <strong>Elasticsearch</strong>，按照 <strong>索引 (Index)</strong> 存储。</li>
<li>Elasticsearch 会自动为日志建立 <strong>倒排索引</strong>，方便后续全文检索。</li>
</ul>
<ol start="4">
<li><strong>日志存储与索引</strong></li>
</ol>
<ul>
<li>Elasticsearch 按时间、业务、服务维度切分日志索引。</li>
<li>日志被分布式存储在多个节点上。</li>
</ul>
<ol start="5">
<li><strong>日志可视化与分析（Kibana）</strong></li>
</ol>
<ul>
<li><strong>Kibana</strong> 提供 Web 界面，连接 Elasticsearch。</li>
<li>用户可以：</li>
</ul>
<p>检索关键字日志</p>
<p>画出趋势图（比如错误量随时间的变化）</p>
<p>构建仪表盘（Dashboard）</p>
<h1 id="⚙️-具体操作流程（举例）"><a href="#⚙️-具体操作流程（举例）" class="headerlink" title="⚙️ 具体操作流程（举例）"></a>⚙️ 具体操作流程（举例）</h1><p>以 <strong>流程审批服务</strong> 的日志为例，走一遍：</p>
<ol>
<li><strong>应用写日志</strong></li>
</ol>
<ul>
<li>你的审批服务在 <code>/var/log/approval-service.log</code> 里记录：</li>
</ul>
<figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2025</span>-<span class="number">08</span>-<span class="number">30</span> <span class="number">10</span>:<span class="number">10</span>:<span class="number">05</span> <span class="keyword">ERROR</span> OrderApprovalService - 审批流程失败，原因：数据库超时</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ol start="2">
<li><strong>Logstash &#x2F; Filebeat 采集</strong></li>
</ol>
<ul>
<li>Filebeat&#x2F;Logstash 读取日志：</li>
</ul>
<p><strong>Input 插件</strong>：指定读取文件路径。</p>
<p><strong>Filter 插件</strong>：用 Grok 正则解析日志格式，提取出时间戳、级别、模块、消息。</p>
<p>转换成结构化 JSON：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-08-30T10:10:05&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;level&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ERROR&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;service&quot;</span><span class="punctuation">:</span> <span class="string">&quot;OrderApprovalService&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;审批流程失败，原因：数据库超时&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ol start="3">
<li><strong>发送到 Elasticsearch</strong></li>
</ol>
<ul>
<li>Logstash 用 <strong>Output 插件</strong> 把日志写入 Elasticsearch，存储到索引：</li>
</ul>
<p>index: <code>approval-service-2025.08.30</code><br>4. <strong>Elasticsearch 存储与索引</strong></p>
<ul>
<li>Elasticsearch 将日志存储在分片中，并建立索引。</li>
<li>支持按 <code>level:ERROR</code> 或 <code>service:OrderApprovalService</code> 进行搜索。</li>
</ul>
<ol start="5">
<li><strong>Kibana 可视化</strong></li>
</ol>
<ul>
<li>在 Kibana 仪表盘里：</li>
</ul>
<p>搜索 <code>level:ERROR</code> → 可以看到所有错误日志。</p>
<p>画一个图表：过去 24 小时审批失败次数的趋势。</p>
<p>如果接入告警系统，还能在错误数量超过阈值时通知运维。</p>
<h1 id="📊-ELK-在你项目里的价值"><a href="#📊-ELK-在你项目里的价值" class="headerlink" title="📊 ELK 在你项目里的价值"></a>📊 ELK 在你项目里的价值</h1><ul>
<li><strong>基础平台服务</strong></li>
</ul>
<p>监控各个中间件（Kafka、MySQL、Redis 等）的运行日志。</p>
<p>快速定位中间件故障。</p>
<ul>
<li><strong>流程审批服务</strong></li>
</ul>
<p>记录审批操作日志、异常信息。</p>
<p>管理员可以通过 Kibana 查询“某用户审批历史”，或“最近 7 天失败的审批流程”。</p>
<h1 id="✅-总结"><a href="#✅-总结" class="headerlink" title="✅ 总结"></a>✅ 总结</h1><p>ELK 的日志处理流程可以概括为：<br><strong>日志采集 → 格式化 → 存储索引 → 搜索分析 → 可视化 &amp; 告警</strong>。</p>
<ul>
<li><strong>Logstash&#x2F;Beats</strong>：采集 &amp; 格式化日志</li>
<li><strong>Elasticsearch</strong>：存储 &amp; 检索日志</li>
<li><strong>Kibana</strong>：展示 &amp; 可视化</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/08/31/MinIO%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9%E5%8F%8A%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="YiDa">
      <meta itemprop="description" content="自古人生于世，须有一技之能；我辈既务斯业，便当专心用功；以后名扬四海，根据即在年轻。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yi's Lab">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/08/31/MinIO%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9%E5%8F%8A%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/" class="post-title-link" itemprop="url">MinIO的优缺点及应用场景</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-08-31 10:28:55" itemprop="dateCreated datePublished" datetime="2025-08-31T10:28:55+09:00">2025-08-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-09-01 17:36:04" itemprop="dateModified" datetime="2025-09-01T17:36:04+09:00">2025-09-01</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="MinIO的优缺点及应用场景"><a href="#MinIO的优缺点及应用场景" class="headerlink" title="MinIO的优缺点及应用场景"></a>MinIO的优缺点及应用场景</h1><p>我来帮你梳理一下 <strong>MinIO 的优缺点</strong>，这样你在选型或项目中使用时就能更清晰。</p>
<h2 id="✅-MinIO-优点"><a href="#✅-MinIO-优点" class="headerlink" title="✅ MinIO 优点"></a>✅ MinIO 优点</h2><ol>
<li><strong>轻量级 &amp; 高性能</strong></li>
</ol>
<ul>
<li>单个二进制文件即可运行，非常容易部署。</li>
<li>用 Go 语言编写，性能优秀，延迟低，单节点能支撑高并发。</li>
</ul>
<ol start="2">
<li><strong>兼容 Amazon S3 API</strong></li>
</ol>
<ul>
<li>完全兼容 S3 协议，可以无缝对接 S3 客户端和 SDK（像 AWS CLI、Java SDK、Python boto3）。</li>
<li>如果未来要迁移到 AWS S3 或其他 S3 兼容存储，改动成本很低。</li>
</ul>
<ol start="3">
<li><strong>易于部署与扩展</strong></li>
</ol>
<ul>
<li>可以 <strong>单机模式</strong> 快速启动，也可以通过 <strong>分布式模式</strong>（多节点集群）提供高可用。</li>
<li>支持 <strong>Kubernetes 部署</strong>，有官方 Operator，云原生友好。</li>
</ul>
<ol start="4">
<li><strong>高可用 &amp; 数据安全</strong></li>
</ol>
<ul>
<li>分布式部署时，支持 <strong>纠删码（Erasure Coding）</strong>，即使丢失部分磁盘&#x2F;节点也能恢复数据。</li>
<li>内置 <strong>数据加密（加密 at rest &amp; in transit）</strong>，支持 KMS。</li>
</ul>
<ol start="5">
<li><strong>多租户与隔离</strong></li>
</ol>
<ul>
<li>支持 <strong>用户管理（IAM）</strong>、策略配置，可以为不同业务或租户隔离存储空间。</li>
</ul>
<ol start="6">
<li><strong>开源 &amp; 活跃社区</strong></li>
</ol>
<ul>
<li>代码开源（Apache 2.0 协议），更新频繁，社区活跃。</li>
<li>商业支持（MinIO Enterprise Subscription）也比较成熟。</li>
</ul>
<h2 id="❌-MinIO-缺点"><a href="#❌-MinIO-缺点" class="headerlink" title="❌ MinIO 缺点"></a>❌ MinIO 缺点</h2><ol>
<li><strong>功能范围有限（对比 Ceph、HDFS 等）</strong></li>
</ol>
<ul>
<li>MinIO <strong>专注对象存储</strong>，不像 Ceph 那样同时支持块存储、文件存储。</li>
<li>适合存放非结构化文件（文档、图片、视频），但不适合数据库持久化。</li>
</ul>
<ol start="2">
<li><strong>集群运维复杂度</strong></li>
</ol>
<ul>
<li>虽然单机很简单，但如果要搭建 <strong>大规模分布式集群</strong>，运维难度上升。</li>
<li>需要配置负载均衡（如 Nginx&#x2F;HAProxy）才能暴露统一访问入口。</li>
</ul>
<ol start="3">
<li><strong>对元数据管理有限</strong></li>
</ol>
<ul>
<li>MinIO 的元数据管理能力不如 Ceph，复杂对象管理（例如版本化管理、跨 Bucket 查询）支持有限。</li>
</ul>
<ol start="4">
<li><strong>商业功能闭源化趋势</strong></li>
</ol>
<ul>
<li>核心功能是开源的，但一些高级功能（如 Active-Active 多站点复制、企业级监控）更多在商业版里。</li>
</ul>
<ol start="5">
<li><strong>生态不如 AWS S3 丰富</strong></li>
</ol>
<ul>
<li>虽然兼容 S3 协议，但 AWS 原生的生态（如 Athena、Glue、Lake Formation）无法直接使用。</li>
</ul>
<h2 id="📌-总结"><a href="#📌-总结" class="headerlink" title="📌 总结"></a>📌 总结</h2><ul>
<li><strong>适用场景</strong>：</li>
</ul>
<p>替代 AWS S3 的私有化对象存储</p>
<p>存放日志、图片、视频、合同、表单附件等非结构化数据</p>
<p>云原生项目（K8s 中当存储服务）</p>
<ul>
<li><strong>不太适合</strong>：</li>
</ul>
<p>直接存放数据库文件（高并发小文件场景效率不高）</p>
<p>需要复杂多协议存储（块、文件、对象三合一）时</p>
<p>👉 一句话：<br><strong>MinIO &#x3D; “轻量版的 S3”，简单、快、开源、好用，但更适合作为对象存储，不是全能型存储系统。</strong></p>
<p>要不要我再帮你整理一份 <strong>MinIO vs Ceph vs HDFS</strong> 的对比表，这样你能更直观看出各自优缺点？</p>
<h1 id="用户问题"><a href="#用户问题" class="headerlink" title="用户问题"></a>用户问题</h1><p>MinIO被开发出来解决哪些用户痛点，应用场景是什么</p>
<h1 id="回答"><a href="#回答" class="headerlink" title="回答"></a>回答</h1><p>好问题 👍<br>要理解 <strong>MinIO 为什么被开发出来</strong>，其实要从企业在存储非结构化数据时的痛点说起。</p>
<h2 id="🔎-MinIO-解决的用户痛点"><a href="#🔎-MinIO-解决的用户痛点" class="headerlink" title="🔎 MinIO 解决的用户痛点"></a>🔎 MinIO 解决的用户痛点</h2><ol>
<li><strong>传统存储系统复杂笨重</strong></li>
</ol>
<ul>
<li>传统对象存储（比如 Ceph、OpenStack Swift）功能强大，但部署运维复杂、学习成本高。</li>
<li>很多企业想要一个 <strong>轻量级、快速上手</strong> 的对象存储方案。</li>
</ul>
<ol start="2">
<li><strong>公有云 S3 成本与依赖问题</strong></li>
</ol>
<ul>
<li>AWS S3 功能好，但在私有化场景下：</li>
</ul>
<p>成本高（大规模存储费用惊人）。</p>
<p>数据安全和合规性难保证（很多企业不能把数据放到国外云）。</p>
<ul>
<li>需要一个 <strong>私有化可替代 S3</strong> 的存储。</li>
</ul>
<ol start="3">
<li><strong>非结构化数据爆炸式增长</strong></li>
</ol>
<ul>
<li>文档、图片、视频、日志、IoT 数据越来越多，数据库（MySQL&#x2F;MongoDB）不适合存这些大文件。</li>
<li>用户需要一个 <strong>高性能、分布式的对象存储</strong> 来支撑大文件场景。</li>
</ul>
<ol start="4">
<li><strong>云原生应用需要原生对象存储</strong></li>
</ol>
<ul>
<li>K8s、微服务、AI&#x2F;大数据应用天然适合用对象存储（而不是传统块存储&#x2F;文件存储）。</li>
<li>企业需要一个 <strong>容器友好、S3 API 兼容</strong> 的轻量存储服务。</li>
</ul>
<ol start="5">
<li><strong>性能瓶颈 &amp; 成本效率</strong></li>
</ol>
<ul>
<li>传统存储架构在 <strong>高并发小文件</strong> 或 <strong>大规模数据吞吐</strong> 上性能不足。</li>
<li>MinIO 专门优化了 <strong>Go 语言实现 + 纠删码</strong>，既快又省。</li>
</ul>
<h2 id="🚀-MinIO-的典型应用场景"><a href="#🚀-MinIO-的典型应用场景" class="headerlink" title="🚀 MinIO 的典型应用场景"></a>🚀 MinIO 的典型应用场景</h2><ol>
<li><strong>企业文件存储 &#x2F; 替代 NAS</strong></li>
</ol>
<ul>
<li>存储合同、设计文件、图片、扫描件等。</li>
<li>和文档管理系统、审批系统（比如你现在的业务）结合。</li>
</ul>
<ol start="2">
<li><strong>大数据 &amp; 日志存储</strong></li>
</ol>
<ul>
<li>作为数据湖的底层存储，承载日志、传感器数据、埋点数据。</li>
<li>Kafka &#x2F; Spark &#x2F; Flink &#x2F; Presto 可以直接读写 MinIO。</li>
</ul>
<ol start="3">
<li><strong>AI&#x2F;机器学习数据集存储</strong></li>
</ol>
<ul>
<li>AI 训练需要大量图片&#x2F;视频&#x2F;语音数据，MinIO 可以作为训练集存储。</li>
<li>TensorFlow &#x2F; PyTorch 等框架支持 S3 协议，可以直接用 MinIO。</li>
</ul>
<ol start="4">
<li><strong>多媒体内容管理</strong></li>
</ol>
<ul>
<li>存储音频、视频文件，配合 CDN 做流媒体分发。</li>
<li>典型应用：视频网站、短视频、在线教育。</li>
</ul>
<ol start="5">
<li><strong>云原生应用 &amp; DevOps</strong></li>
</ol>
<ul>
<li>在 Kubernetes 里作为对象存储服务，供应用存放配置、日志、备份文件。</li>
<li>CI&#x2F;CD 过程中存储构建产物、镜像制品。</li>
</ul>
<ol start="6">
<li><strong>备份与归档</strong></li>
</ol>
<ul>
<li>数据库、虚拟机镜像、系统快照的备份。</li>
<li>归档冷数据，保证安全性和低成本存储。</li>
</ul>
<h2 id="🎯-总结一句话"><a href="#🎯-总结一句话" class="headerlink" title="🎯 总结一句话"></a>🎯 总结一句话</h2><p>MinIO 的出现，就是为了让用户：</p>
<p>👉 <strong>用最简单的方式，在私有环境中快速拥有一个兼容 S3 的高性能对象存储</strong>。</p>
<ul>
<li><strong>痛点</strong>：传统存储复杂&#x2F;贵，数据库不适合大文件，云依赖性强。</li>
<li><strong>应用场景</strong>：企业文件存储、数据湖、AI 训练集、多媒体存储、云原生备份等。</li>
</ul>
<p>要不要我帮你结合 <strong>你的流程审批业务</strong>，举几个 <strong>MinIO 的具体使用场景</strong>（比如存储审批附件、合同扫描件、日志归档）？</p>
<h1 id="用户问题-1"><a href="#用户问题-1" class="headerlink" title="用户问题"></a>用户问题</h1><p>我直接在linux上存储文件不行吗？非要用MinIO</p>
<h1 id="回答-1"><a href="#回答-1" class="headerlink" title="回答"></a>回答</h1><p>这个问题问得非常关键 👍<br>其实很多人一开始都会想：<strong>“我直接用 Linux 文件系统存文件不就好了？为什么还要引入 MinIO 这样的中间件？”</strong><br>我来帮你分析一下这两者的差异。</p>
<h2 id="📂-直接在-Linux-上存储文件（文件系统方案）"><a href="#📂-直接在-Linux-上存储文件（文件系统方案）" class="headerlink" title="📂 直接在 Linux 上存储文件（文件系统方案）"></a>📂 直接在 Linux 上存储文件（文件系统方案）</h2><h3 id="✅-优点"><a href="#✅-优点" class="headerlink" title="✅ 优点"></a>✅ 优点</h3><ul>
<li><strong>简单</strong>：直接写入磁盘路径，几乎零学习成本。</li>
<li><strong>无需额外服务</strong>：不用搭建、运维 MinIO。</li>
<li><strong>本地性能高</strong>：单机存取速度快（特别是 SSD）。</li>
</ul>
<h3 id="❌-缺点"><a href="#❌-缺点" class="headerlink" title="❌ 缺点"></a>❌ 缺点</h3><ol>
<li><strong>扩展性差</strong></li>
</ol>
<ul>
<li>单机磁盘有限，存满了就要人工迁移。</li>
<li>多台机器时，应用要自己处理“文件分布在哪台机器”的问题。</li>
</ul>
<ol start="2">
<li><strong>缺少 API 标准化</strong></li>
</ol>
<ul>
<li>文件系统访问依赖绝对路径，没有统一的对象存储 API。</li>
<li>如果以后迁移到云（AWS S3、阿里云 OSS），代码要大改。</li>
</ul>
<ol start="3">
<li><strong>缺乏高可用 &amp; 容错能力</strong></li>
</ol>
<ul>
<li>磁盘坏了、服务器挂了，文件就丢失，缺少冗余和纠删码机制。</li>
</ul>
<ol start="4">
<li><strong>难以做权限管理 &amp; 多租户</strong></li>
</ol>
<ul>
<li>Linux 文件权限模型（rwx）粒度有限，不适合复杂的业务租户隔离。</li>
</ul>
<ol start="5">
<li><strong>运维管理复杂</strong></li>
</ol>
<ul>
<li>随着数据量增长，文件分区、路径管理、备份、归档会变得非常麻烦。</li>
</ul>
<h2 id="☁️-用-MinIO（对象存储方案）"><a href="#☁️-用-MinIO（对象存储方案）" class="headerlink" title="☁️ 用 MinIO（对象存储方案）"></a>☁️ 用 MinIO（对象存储方案）</h2><h3 id="✅-优点-1"><a href="#✅-优点-1" class="headerlink" title="✅ 优点"></a>✅ 优点</h3><ol>
<li><strong>S3 API 标准化</strong></li>
</ol>
<ul>
<li>你用 MinIO 存文件，就相当于用了 AWS S3 的接口。</li>
<li>未来迁移上云几乎不用改业务代码。</li>
</ul>
<ol start="2">
<li><strong>天然分布式 &amp; 可扩展</strong></li>
</ol>
<ul>
<li>可以从单机扩展到多节点分布式集群，数据自动分布和冗余。</li>
<li>不需要你关心文件存在第几块磁盘。</li>
</ul>
<ol start="3">
<li><strong>高可用与容错</strong></li>
</ol>
<ul>
<li>支持纠删码（Erasure Coding），即使丢了部分硬盘或节点，也能恢复数据。</li>
</ul>
<ol start="4">
<li><strong>安全与权限</strong></li>
</ol>
<ul>
<li>内置用户、访问策略（IAM），可细粒度控制谁能访问哪个 Bucket&#x2F;对象。</li>
</ul>
<ol start="5">
<li><strong>生态丰富</strong></li>
</ol>
<ul>
<li>兼容 Hadoop、Spark、Presto、Kafka Connect 等大数据&#x2F;AI 工具，直接作为存储底座。</li>
</ul>
<ol start="6">
<li><strong>云原生友好</strong></li>
</ol>
<ul>
<li>有官方 Helm Chart &#x2F; Operator，直接在 Kubernetes 部署。</li>
</ul>
<h3 id="❌-缺点-1"><a href="#❌-缺点-1" class="headerlink" title="❌ 缺点"></a>❌ 缺点</h3><ul>
<li><strong>比文件系统复杂</strong>：需要额外运维 MinIO 服务。</li>
<li><strong>有学习成本</strong>：要熟悉对象存储的 API 和运维。</li>
<li><strong>极小数据量场景不划算</strong>：如果只是存几十个文件，直接 Linux 就足够。</li>
</ul>
<h2 id="📌-总结对比"><a href="#📌-总结对比" class="headerlink" title="📌 总结对比"></a>📌 总结对比</h2><table>
<thead>
<tr>
<th>特性</th>
<th>Linux 文件系统</th>
<th>MinIO（对象存储）</th>
</tr>
</thead>
<tbody><tr>
<td>易用性</td>
<td>✅ 简单，直接存路径</td>
<td>❌ 需要部署和 API 学习</td>
</tr>
<tr>
<td>扩展性</td>
<td>❌ 单机受限</td>
<td>✅ 支持分布式扩展</td>
</tr>
<tr>
<td>高可用&#x2F;容错</td>
<td>❌ 磁盘坏了就丢</td>
<td>✅ 纠删码&#x2F;副本保障数据安全</td>
</tr>
<tr>
<td>标准化接口</td>
<td>❌ 无统一标准</td>
<td>✅ 兼容 S3 API</td>
</tr>
<tr>
<td>多租户&#x2F;权限控制</td>
<td>❌ 简单的 rwx</td>
<td>✅ 细粒度 IAM 策略</td>
</tr>
<tr>
<td>云原生支持</td>
<td>❌ 基本无</td>
<td>✅ K8s 原生支持</td>
</tr>
</tbody></table>
<p>👉 适用结论：</p>
<ul>
<li><strong>小型项目 &#x2F; 单机部署 &#x2F; 数据量不大</strong> → 直接 Linux 存储即可。</li>
<li><strong>中大型项目 &#x2F; 微服务架构 &#x2F; 数据需要分布式存储 &amp; 云原生支持</strong> → MinIO 更合适。</li>
</ul>
<p>要不要我帮你结合 <strong>你的流程审批业务</strong>，具体分析什么时候直接存 Linux 文件就够用，什么时候必须上 MinIO？</p>
<h1 id="用户问题-2"><a href="#用户问题-2" class="headerlink" title="用户问题"></a>用户问题</h1><p>MinIO对象存储我存储对象后，背后发生了什么</p>
<h1 id="回答-2"><a href="#回答-2" class="headerlink" title="回答"></a>回答</h1><p>这个问题问得非常好 👍<br>理解 <strong>MinIO 存储对象背后发生了什么</strong>，能帮助你清楚它和直接文件存储的差异。<br>我给你拆成 <strong>单机模式</strong> 和 <strong>分布式模式</strong> 两种情况讲。</p>
<h2 id="🖥️-1-单机模式下：存一个对象的过程"><a href="#🖥️-1-单机模式下：存一个对象的过程" class="headerlink" title="🖥️ 1. 单机模式下：存一个对象的过程"></a>🖥️ 1. 单机模式下：存一个对象的过程</h2><p>假设你调用 MinIO 的 <strong>S3 API</strong> 上传一个文件 <code>contract.pdf</code>：</p>
<ol>
<li><strong>客户端发起请求</strong></li>
</ol>
<ul>
<li>通过 S3 API (<code>PUT Object</code>) 向 MinIO 发送文件，附带 <strong>Bucket 名、对象名</strong>。</li>
<li>例如：<code>/contracts/contract.pdf</code>。</li>
</ul>
<ol start="2">
<li><strong>MinIO 接收请求</strong></li>
</ol>
<ul>
<li>MinIO 作为服务进程监听在端口（通常 9000&#x2F;9001）。</li>
<li>校验请求签名、权限（IAM policy）。</li>
</ul>
<ol start="3">
<li><strong>对象命名空间映射</strong></li>
</ol>
<ul>
<li>MinIO 把对象看作一个 <strong>key-value 对</strong>：</li>
</ul>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">key</span> = contracts/contract.pdf</span><br><span class="line"><span class="attr">value</span> = 文件内容</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>存储时不会直接按路径存，而是内部维护一个 <strong>对象索引</strong>。</li>
</ul>
<ol start="4">
<li><strong>写入磁盘</strong></li>
</ol>
<ul>
<li>文件内容被写入底层文件系统（比如 ext4 &#x2F; XFS）。</li>
<li>MinIO 可能会将大文件切分成 <strong>分片</strong> 存储，并生成 <strong>元数据文件</strong>（对象大小、MD5、版本号等）。</li>
<li>对象名和物理文件名之间有映射关系。</li>
</ul>
<ol start="5">
<li><strong>更新元数据</strong></li>
</ol>
<ul>
<li>MinIO 更新 Bucket 的元数据信息（比如对象列表、版本信息）。</li>
</ul>
<ol start="6">
<li><strong>返回成功响应</strong></li>
</ol>
<ul>
<li>给客户端返回 <code>200 OK</code>，对象存储完成。</li>
</ul>
<p>👉 在单机模式下，其实本质上就是 <strong>包装了文件系统</strong>，但提供了 S3 API + 权限管理 + 元数据管理。</p>
<h2 id="🌐-2-分布式模式下（更关键）"><a href="#🌐-2-分布式模式下（更关键）" class="headerlink" title="🌐 2. 分布式模式下（更关键）"></a>🌐 2. 分布式模式下（更关键）</h2><p>当 MinIO 部署成 <strong>多节点分布式集群</strong> 时，存储一个对象会发生更多事情：</p>
<ol>
<li><strong>请求进入集群</strong></li>
</ol>
<ul>
<li>负载均衡（Nginx&#x2F;HAProxy&#x2F;K8s Service）把请求路由到某个 MinIO 节点。</li>
</ul>
<ol start="2">
<li><strong>对象切片 &amp; 分布式存储</strong></li>
</ol>
<ul>
<li>大文件会被切成多个 **块 (part&#x2F;chunk)**。</li>
<li>MinIO 会根据 <strong>纠删码 (Erasure Coding)</strong> 算法，把数据块分散写入多个节点&#x2F;磁盘。</li>
</ul>
<p>比如 4 数据 + 2 校验 &#x3D; 共 6 份分布在不同磁盘。</p>
<p>即使坏掉 2 块磁盘，也能通过校验块恢复。<br>3. <strong>元数据一致性管理</strong></p>
<ul>
<li>MinIO 内部有分布式一致性协议（类似 quorum），确保所有节点的元数据保持一致。</li>
<li>对象的 <strong>位置、分片信息</strong> 会记录在元数据中。</li>
</ul>
<ol start="4">
<li><strong>写入磁盘 &amp; 校验</strong></li>
</ol>
<ul>
<li>各节点写入对应的数据块和校验块。</li>
<li>写完会计算哈希校验，确保数据完整性。</li>
</ul>
<ol start="5">
<li><strong>返回成功响应</strong></li>
</ol>
<ul>
<li>只要满足写入 quorum（多数节点成功），MinIO 就返回成功。</li>
<li>如果部分节点写失败，会自动重试或标记修复任务。</li>
</ul>
<p>👉 这样，你存一个文件时，其实背后可能分布到了 <strong>多台服务器、多块磁盘</strong>，并带有 <strong>冗余和校验</strong>，确保高可用。</p>
<h2 id="📌-3-总结：MinIO-存对象背后的关键动作"><a href="#📌-3-总结：MinIO-存对象背后的关键动作" class="headerlink" title="📌 3. 总结：MinIO 存对象背后的关键动作"></a>📌 3. 总结：MinIO 存对象背后的关键动作</h2><ul>
<li><strong>单机模式</strong>：对象名 → 磁盘文件映射（外加元数据管理）。</li>
<li><strong>分布式模式</strong>：对象被 <strong>分片 + 冗余编码</strong>，分布在不同节点，保证 <strong>高可用 &amp; 容错</strong>。</li>
<li><strong>额外能力</strong>：权限校验（IAM）、多租户隔离、S3 API 标准接口、数据完整性校验。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/08/31/%E5%AE%9E%E9%99%85%E9%A1%B9%E7%9B%AE%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%9A%84%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%B8%BE%E4%BE%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="YiDa">
      <meta itemprop="description" content="自古人生于世，须有一技之能；我辈既务斯业，便当专心用功；以后名扬四海，根据即在年轻。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yi's Lab">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/08/31/%E5%AE%9E%E9%99%85%E9%A1%B9%E7%9B%AE%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%9A%84%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%B8%BE%E4%BE%8B/" class="post-title-link" itemprop="url">实际项目微服务中间件的架构设计举例</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-08-31 10:25:08" itemprop="dateCreated datePublished" datetime="2025-08-31T10:25:08+09:00">2025-08-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-09-01 17:36:04" itemprop="dateModified" datetime="2025-09-01T17:36:04+09:00">2025-09-01</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="实际项目微服务中间件的架构设计举例"><a href="#实际项目微服务中间件的架构设计举例" class="headerlink" title="实际项目微服务中间件的架构设计举例"></a>实际项目微服务中间件的架构设计举例</h1><p>这个项目涉及到的这些中间件，可以组合成一个完整的 <strong>分布式微服务架构</strong>，包括存储、消息通信、注册发现、监控日志、对象存储等等。我帮你梳理一下整体架构和每个中间件的作用。</p>
<h2 id="🏗-项目架构梳理"><a href="#🏗-项目架构梳理" class="headerlink" title="🏗 项目架构梳理"></a>🏗 项目架构梳理</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">         ┌─────────────┐</span></span><br><span class="line"><span class="code">         │   客户端    │</span></span><br><span class="line"><span class="code">         └──────┬──────┘</span></span><br><span class="line"><span class="code">                │</span></span><br><span class="line"><span class="code">         ┌──────▼───────┐</span></span><br><span class="line"><span class="code">         │ API 网关/服务 │</span></span><br><span class="line"><span class="code">         └──────┬───────┘</span></span><br><span class="line"><span class="code">                │</span></span><br><span class="line"><span class="code">┌───────────────┴─────────────────┐</span></span><br><span class="line"><span class="code">│                                 │</span></span><br><span class="line"><span class="code">│         微服务核心层             │</span></span><br><span class="line"><span class="code">│   （通过 Nacos 服务发现）        │</span></span><br><span class="line"><span class="code">│                                 │</span></span><br><span class="line"><span class="code">└───────────────┬─────────────────┘</span></span><br><span class="line"><span class="code">                │</span></span><br><span class="line"><span class="code">┌───────────────┼─────────────────────────────────────────────┐</span></span><br><span class="line"><span class="code">│ 数据与消息支持层                                               │</span></span><br><span class="line"><span class="code">│                                                               │</span></span><br><span class="line"><span class="code">│  ┌─────────┐   ┌──────────────┐   ┌─────────┐   ┌─────────┐  │</span></span><br><span class="line"><span class="code">│  │ MySQL   │   │   MongoDB    │   │  Redis  │   │  MinIO  │  │</span></span><br><span class="line"><span class="code">│  │ 关系库  │   │ 文档型数据库 │   │缓存/会话│   │对象存储 │  │</span></span><br><span class="line"><span class="code">│  └─────────┘   └──────────────┘   └─────────┘   └─────────┘  │</span></span><br><span class="line"><span class="code">│                                                               │</span></span><br><span class="line"><span class="code">│  ┌─────────┐   ┌─────────────┐   ┌─────────────┐              │</span></span><br><span class="line"><span class="code">│  │ Kafka   │   │ RocketMQ     │   │ Zookeeper   │              │</span></span><br><span class="line"><span class="code">│  │流处理   │   │可靠消息队列  │   │分布式协调   │              │</span></span><br><span class="line"><span class="code">│  └─────────┘   └─────────────┘   └─────────────┘              │</span></span><br><span class="line"><span class="code">└───────────────────────────────────────────────────────────────┘</span></span><br><span class="line"><span class="code">                │</span></span><br><span class="line"><span class="code">┌───────────────┼─────────────────────────────────────────────┐</span></span><br><span class="line"><span class="code">│ 运维与监控层                                                 │</span></span><br><span class="line"><span class="code">│                                                             │</span></span><br><span class="line"><span class="code">│   ┌──────────┐  ┌───────────┐  ┌─────────────┐  ┌─────────┐ │</span></span><br><span class="line"><span class="code">│   │ Elastic  │  │ Logstash  │  │   Kibana    │  │ Dozzle  │ │</span></span><br><span class="line"><span class="code">│   │ 搜索引擎 │  │ 日志收集  │  │ 可视化展示  │  │ 容器日志 │ │</span></span><br><span class="line"><span class="code">│   └──────────┘  └───────────┘  └─────────────┘  └─────────┘ │</span></span><br><span class="line"><span class="code">│                                                             │</span></span><br><span class="line"><span class="code">│                ┌────────────────────────────┐               │</span></span><br><span class="line"><span class="code">│                │ RocketMQ-Dashboard         │               │</span></span><br><span class="line"><span class="code">│                │ MQ 消息监控与管理工具      │               │</span></span><br><span class="line"><span class="code">│                └────────────────────────────┘               │</span></span><br><span class="line"><span class="code">└─────────────────────────────────────────────────────────────┘</span></span><br><span class="line"><span class="code"></span></span><br></pre></td></tr></table></figure>


<h2 id="📦-各中间件作用说明"><a href="#📦-各中间件作用说明" class="headerlink" title="📦 各中间件作用说明"></a>📦 各中间件作用说明</h2><h3 id="🔹-数据存储层"><a href="#🔹-数据存储层" class="headerlink" title="🔹 数据存储层"></a>🔹 数据存储层</h3><ol>
<li><strong>MySQL</strong></li>
</ol>
<ul>
<li>关系型数据库，存放核心业务数据（订单、用户、配置等）。</li>
</ul>
<ol start="2">
<li><strong>MongoDB</strong></li>
</ol>
<ul>
<li>文档型数据库，适合存储 JSON&#x2F;非结构化数据，比如日志、配置、产品详情等。</li>
</ul>
<ol start="3">
<li><strong>Redis</strong></li>
</ol>
<ul>
<li>高速缓存、分布式锁、会话管理（比如存用户 token、验证码、排行榜等）。</li>
</ul>
<ol start="4">
<li><strong>MinIO</strong></li>
</ol>
<ul>
<li>对象存储，兼容 S3 API，用来存放大文件（视频、图片、文档等）。</li>
</ul>
<h3 id="🔹-消息与通信层"><a href="#🔹-消息与通信层" class="headerlink" title="🔹 消息与通信层"></a>🔹 消息与通信层</h3><ol>
<li><strong>Kafka</strong></li>
</ol>
<ul>
<li>高吞吐量流式处理平台，适合日志采集、实时计算、流式数据分析。</li>
</ul>
<ol start="2">
<li><strong>RocketMQ</strong></li>
</ol>
<ul>
<li>可靠消息队列（事务消息、延时消息），适合订单、支付、库存等强一致场景。</li>
</ul>
<ol start="3">
<li><strong>Zookeeper</strong></li>
</ol>
<ul>
<li>分布式协调服务，RocketMQ&#x2F;Kafka 都依赖它来做元数据存储、选举、分布式锁。</li>
</ul>
<h3 id="🔹-服务治理层"><a href="#🔹-服务治理层" class="headerlink" title="🔹 服务治理层"></a>🔹 服务治理层</h3><ol>
<li><strong>Nacos</strong></li>
</ol>
<ul>
<li>服务注册与发现（微服务相互调用时找到彼此）。</li>
<li>配置中心（集中管理配置）。</li>
</ul>
<h3 id="🔹-日志与监控层"><a href="#🔹-日志与监控层" class="headerlink" title="🔹 日志与监控层"></a>🔹 日志与监控层</h3><ol>
<li><strong>ElasticSearch</strong></li>
</ol>
<ul>
<li>全文搜索引擎，存储和索引日志、指标数据。</li>
</ul>
<ol start="2">
<li><strong>Logstash</strong></li>
</ol>
<ul>
<li>日志收集、过滤和转发，把应用日志送进 Elasticsearch。</li>
</ul>
<ol start="3">
<li><strong>Kibana</strong></li>
</ol>
<ul>
<li>数据可视化，配合 ElasticSearch 展示监控大盘、日志分析。</li>
</ul>
<ol start="4">
<li><strong>Dozzle</strong></li>
</ol>
<ul>
<li>实时查看 Docker 容器日志（轻量级 Web UI）。</li>
</ul>
<ol start="5">
<li><strong>RocketMQ-Dashboard</strong></li>
</ol>
<ul>
<li>RocketMQ 的可视化监控台（查看 Topic、消费情况、积压消息等）。</li>
</ul>
<h2 id="🎯-总结"><a href="#🎯-总结" class="headerlink" title="🎯 总结"></a>🎯 总结</h2><ul>
<li><strong>数据库层</strong>：MySQL（关系型）、MongoDB（文档）、Redis（缓存）、MinIO（文件存储）</li>
<li><strong>消息队列层</strong>：Kafka（日志流）、RocketMQ（业务消息）、Zookeeper（协调）</li>
<li><strong>服务治理层</strong>：Nacos（注册发现 + 配置中心）</li>
<li><strong>监控日志层</strong>：ELK（Elastic + Logstash + Kibana）、Dozzle、RocketMQ Dashboard</li>
</ul>
<p>👉 这套组合基本能支撑一个 <strong>大规模微服务平台</strong>，涵盖 <strong>存储、消息、注册、监控</strong> 四大关键部分。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/08/31/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9A%84%E4%BC%98%E7%82%B9%E6%9C%89%E5%93%AA%E4%BA%9B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="YiDa">
      <meta itemprop="description" content="自古人生于世，须有一技之能；我辈既务斯业，便当专心用功；以后名扬四海，根据即在年轻。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yi's Lab">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/08/31/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9A%84%E4%BC%98%E7%82%B9%E6%9C%89%E5%93%AA%E4%BA%9B/" class="post-title-link" itemprop="url">微服务的优点有哪些</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-08-31 10:22:35" itemprop="dateCreated datePublished" datetime="2025-08-31T10:22:35+09:00">2025-08-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-09-01 17:36:04" itemprop="dateModified" datetime="2025-09-01T17:36:04+09:00">2025-09-01</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="微服务的优点"><a href="#微服务的优点" class="headerlink" title="微服务的优点"></a>微服务的优点</h1><p>微服务是一种将应用拆分成多个<strong>小而独立的服务</strong>的架构模式，每个服务专注于单一功能，通过网络接口（通常是 HTTP&#x2F;REST 或 gRPC）通信。它和传统单体应用相比，有很多优点。下面我给你系统整理一下：</p>
<h3 id="1️⃣-独立部署"><a href="#1️⃣-独立部署" class="headerlink" title="1️⃣ 独立部署"></a>1️⃣ 独立部署</h3><ul>
<li>每个微服务可以<strong>独立开发、测试、部署</strong>，不需要和整个应用捆绑。</li>
<li>优势：</li>
</ul>
<p>更新某个功能不影响其他服务。</p>
<p>可以缩短发布周期，提高敏捷性。</p>
<h3 id="2️⃣-技术多样性"><a href="#2️⃣-技术多样性" class="headerlink" title="2️⃣ 技术多样性"></a>2️⃣ 技术多样性</h3><ul>
<li>不同微服务可以使用<strong>不同的技术栈</strong>、数据库或编程语言。</li>
<li>优势：</li>
</ul>
<p>可以选择最适合业务需求的技术。</p>
<p>避免全局技术锁定。</p>
<h3 id="3️⃣-高可维护性"><a href="#3️⃣-高可维护性" class="headerlink" title="3️⃣ 高可维护性"></a>3️⃣ 高可维护性</h3><ul>
<li>微服务代码量小、功能单一，逻辑清晰。</li>
<li>优势：</li>
</ul>
<p>容易理解和修改。</p>
<p>降低出错概率。</p>
<h3 id="4️⃣-可扩展性（水平扩展）"><a href="#4️⃣-可扩展性（水平扩展）" class="headerlink" title="4️⃣ 可扩展性（水平扩展）"></a>4️⃣ 可扩展性（水平扩展）</h3><ul>
<li>可以针对负载高的服务<strong>单独扩展实例</strong>，而不需要扩展整个应用。</li>
<li>优势：</li>
</ul>
<p>提高资源利用率。</p>
<p>降低硬件成本。</p>
<h3 id="5️⃣-容错性与高可用性"><a href="#5️⃣-容错性与高可用性" class="headerlink" title="5️⃣ 容错性与高可用性"></a>5️⃣ 容错性与高可用性</h3><ul>
<li>单个服务失败不会影响整个系统。</li>
<li>可以通过<strong>服务冗余和自动恢复</strong>提升系统稳定性。</li>
</ul>
<h3 id="6️⃣-团队协作优化"><a href="#6️⃣-团队协作优化" class="headerlink" title="6️⃣ 团队协作优化"></a>6️⃣ 团队协作优化</h3><ul>
<li>微服务可以按业务模块划分团队，每个团队独立负责一组服务。</li>
<li>优势：</li>
</ul>
<p>团队自治，减少跨模块依赖。</p>
<p>提高开发效率和责任清晰度。</p>
<h3 id="7️⃣-易于持续集成-x2F-持续交付（CI-x2F-CD）"><a href="#7️⃣-易于持续集成-x2F-持续交付（CI-x2F-CD）" class="headerlink" title="7️⃣ 易于持续集成&#x2F;持续交付（CI&#x2F;CD）"></a>7️⃣ 易于持续集成&#x2F;持续交付（CI&#x2F;CD）</h3><ul>
<li>小服务、独立部署，非常适合自动化构建、测试和部署。</li>
<li>可以频繁发布新功能。</li>
</ul>
<h3 id="⚠️-注意"><a href="#⚠️-注意" class="headerlink" title="⚠️ 注意"></a>⚠️ 注意</h3><p>虽然微服务有很多优点，但也带来<strong>复杂性</strong>：</p>
<ul>
<li>服务间通信成本增加（网络延迟、消息格式）。</li>
<li>分布式事务、数据一致性和日志追踪更复杂。</li>
<li>部署和运维难度提升，需要服务注册、监控、网关等支撑。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/08/31/%E4%BB%80%E4%B9%88%E6%98%AF%E5%88%86%E5%B8%83%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="YiDa">
      <meta itemprop="description" content="自古人生于世，须有一技之能；我辈既务斯业，便当专心用功；以后名扬四海，根据即在年轻。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yi's Lab">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/08/31/%E4%BB%80%E4%B9%88%E6%98%AF%E5%88%86%E5%B8%83%E5%BC%8F/" class="post-title-link" itemprop="url">什么是分布式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-08-31 10:20:30" itemprop="dateCreated datePublished" datetime="2025-08-31T10:20:30+09:00">2025-08-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-09-01 17:36:04" itemprop="dateModified" datetime="2025-09-01T17:36:04+09:00">2025-09-01</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="什么是分布式"><a href="#什么是分布式" class="headerlink" title="什么是分布式"></a>什么是分布式</h1><p>“分布式”是一个计算机和系统设计中的概念，指的是<strong>把计算任务或数据分散到多个计算节点（机器、服务器或设备）上协同完成</strong>的一种方式。简单说，就是“不把所有东西放在一个地方，而是让多个地方一起工作”。</p>
<p>分几部分解释：</p>
<h3 id="1️⃣-核心思想"><a href="#1️⃣-核心思想" class="headerlink" title="1️⃣ 核心思想"></a>1️⃣ 核心思想</h3><ul>
<li><strong>多台机器协作</strong>：系统由多个独立的节点组成，每个节点可以处理一部分任务。</li>
<li><strong>协作完成任务</strong>：节点之间通过网络通信，实现资源共享、任务分工和协同处理。</li>
<li><strong>增加可靠性和扩展性</strong>：单台机器坏了不影响整体，系统容易扩展。</li>
</ul>
<h3 id="2️⃣-特点"><a href="#2️⃣-特点" class="headerlink" title="2️⃣ 特点"></a>2️⃣ 特点</h3><ol>
<li><strong>资源分布</strong>：计算、存储和网络资源分散在不同节点。</li>
<li><strong>并行处理</strong>：多个节点同时处理任务，提高效率。</li>
<li><strong>可扩展性</strong>：增加更多节点可以提高系统能力。</li>
<li><strong>容错性</strong>：某些节点出问题，系统仍能继续运行。</li>
<li><strong>数据一致性问题</strong>：多个节点可能存储相同数据，需要解决同步问题。</li>
</ol>
<h3 id="3️⃣-常见形式"><a href="#3️⃣-常见形式" class="headerlink" title="3️⃣ 常见形式"></a>3️⃣ 常见形式</h3><ul>
<li><strong>分布式存储</strong>：例如 HDFS（Hadoop 分布式文件系统）、Ceph、MinIO。</li>
<li><strong>分布式计算</strong>：如 Spark、Hadoop MapReduce，把计算任务分成小块在多台机器上处理。</li>
<li><strong>分布式数据库</strong>：如 MongoDB、Cassandra、TiDB，把数据分片存储在不同节点。</li>
<li><strong>分布式系统服务</strong>：如 Nacos、ZooKeeper，实现服务注册、配置管理。</li>
</ul>
<h3 id="4️⃣-举个生活例子"><a href="#4️⃣-举个生活例子" class="headerlink" title="4️⃣ 举个生活例子"></a>4️⃣ 举个生活例子</h3><p>想象你在做一份大报告：</p>
<ul>
<li>单机方式：你一个人完成，慢且容易出错。</li>
<li>分布式方式：你把报告分成章节，分给5个人同时写，最后整合。<br>这样不仅快，还能避免某个人临时无法工作导致整个报告延迟。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/08/15/lsp%E7%A8%8B%E5%BA%8F%E7%9A%84%E4%B8%80%E4%B8%AA%E5%AE%9E%E4%BE%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="YiDa">
      <meta itemprop="description" content="自古人生于世，须有一技之能；我辈既务斯业，便当专心用功；以后名扬四海，根据即在年轻。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yi's Lab">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/08/15/lsp%E7%A8%8B%E5%BA%8F%E7%9A%84%E4%B8%80%E4%B8%AA%E5%AE%9E%E4%BE%8B/" class="post-title-link" itemprop="url">lsp程序的一个实例</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-08-15 11:17:49" itemprop="dateCreated datePublished" datetime="2025-08-15T11:17:49+09:00">2025-08-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-09-01 17:36:04" itemprop="dateModified" datetime="2025-09-01T17:36:04+09:00">2025-09-01</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>通过cad命令，选中一个区域快速帮我快速把dwg文件中手工绘制的表格快速网格化，网格的线单独在一个辅助线图层，并为红色，然后标注网格间的尺寸和纵横格子数量</p>
<p>你这个需求可以通过 AutoLISP（LSP） 来实现，功能目标是：</p>
<p>手动框选一个区域；</p>
<p>分析其中的手工绘制表格线（一般是直线）；</p>
<p>自动生成等价的网格结构线（在单独图层，红色）；</p>
<p>标注每个单元格的尺寸；</p>
<p>输出纵横格子数量。</p>
<h1 id="用户问题"><a href="#用户问题" class="headerlink" title="用户问题"></a>用户问题</h1><p>(defun remove-duplicates (lst)<br>  (if lst<br>    (cons (car lst)<br>          (remove-duplicates (vl-remove (car lst) (cdr lst))))<br>    nil<br>  )<br>)</p>
<p>(defun index-to-letter (n)<br>  ;; 将 1 转为 A，2 转为 B，… 26-&gt;Z，27-&gt;AA，支持多列<br>  (if (&lt; n 1)<br>    “”<br>    (strcat<br>      (index-to-letter (&#x2F; (1- n) 26))<br>      (chr (+ 64 (rem (1- n) 26) 1))<br>    )<br>  )<br>)</p>
<p>(defun c:ZZ ( &#x2F; p1 p2 ss i ent hor ver<br>                 pt1 pt2 x1 x2 y1 y2<br>                 hor-pos ver-pos<br>                 x y x-min x-max y-min y-max<br>                 row-count col-count offset grid-lines<br>                 doc layers newLayer<br>                 diments dim<br>                 seq-text-height seq-x seq-y)</p>
<p>  (vl-load-com)<br>  (setq offset 30) ;; 辅助线延长长度<br>  (setq seq-text-height 4) ;; 编号文字高度</p>
<p>  ;; 创建红色辅助图层（如果不存在）<br>  (if (not (tblsearch “LAYER” “GRID-LAYER”))<br>    (progn<br>      (setq doc (vla-get-ActiveDocument (vlax-get-Acad-Object)))<br>      (setq layers (vla-get-Layers doc))<br>      (setq newLayer (vla-Add layers “GRID-LAYER”))<br>      (vla-put-Color newLayer 1) ; 红色<br>    )<br>  )<br>  (setvar “CLAYER” “GRID-LAYER”)</p>
<p>  ;; 选取区域两个角点<br>  (setq p1 (getpoint “\n选择表格区域的第一个角点: “))<br>  (setq p2 (getcorner p1 “\n选择对角点: “))</p>
<p>  ;; 获取区域内所有线段<br>  (setq ss (ssget “W” p1 p2 ‘((0 . “LINE”))))</p>
<p>  (if ss<br>    (progn<br>      (setq hor ‘() ver ‘() i 0)</p>
<pre><code>  ;; 分类横线和竖线
  (while (&amp;lt; i (sslength ss))
    (setq ent (entget (ssname ss i)))
    (setq pt1 (cdr (assoc 10 ent)))
    (setq pt2 (cdr (assoc 11 ent)))
    (setq x1 (car pt1) y1 (cadr pt1))
    (setq x2 (car pt2) y2 (cadr pt2))
    (cond
      ((&amp;lt; (abs (- y1 y2)) 1e-6) (setq hor (cons y1 hor)))
      ((&amp;lt; (abs (- x1 x2)) 1e-6) (setq ver (cons x1 ver)))
    )
    (setq i (1+ i))
  )

  ;; 去重排序
  (setq hor-pos (vl-sort (remove-duplicates hor) &#39;&amp;lt;))
  (setq ver-pos (vl-sort (remove-duplicates ver) &#39;&amp;lt;))

  ;; 行列数量
  (setq row-count (1- (length hor-pos)))
  (setq col-count (1- (length ver-pos)))

  ;; 边界
  (setq x-min (car ver-pos))
  (setq x-max (last ver-pos))
  (setq y-min (car hor-pos))
  (setq y-max (last hor-pos))

  ;; UNDO分组：辅助线
  (command &quot;UNDO&quot; &quot;GROUP&quot;)
  ;; 竖线
  (foreach x ver-pos
    (entmake (list
      (cons 0 &quot;LINE&quot;) (cons 8 &quot;GRID-LAYER&quot;) (cons 62 1)
      (cons 10 (list x (- y-min offset) 0.0))
      (cons 11 (list x (+ y-max offset) 0.0))
    ))
  )
  ;; 横线
  (foreach y hor-pos
    (entmake (list
      (cons 0 &quot;LINE&quot;) (cons 8 &quot;GRID-LAYER&quot;) (cons 62 1)
      (cons 10 (list (- x-min offset) y 0.0))
      (cons 11 (list (+ x-max offset) y 0.0))
    ))
  )
  (command &quot;UNDO&quot; &quot;END&quot;)

  ;; UNDO分组：尺寸标注
  (command &quot;UNDO&quot; &quot;GROUP&quot;)
  (setq diments (ssadd))

  ;; 行高标注（左侧）
  (setq i 0)
  (while (&amp;lt; i row-count)
    (command &quot;_.DIMLINEAR&quot;
             &quot;_H&quot;
             (list x-min (nth i hor-pos) 0.0)
             (list x-min (nth (1+ i) hor-pos) 0.0)
             (list (- x-min 50) (/ (+ (nth i hor-pos) (nth (1+ i) hor-pos)) 2) 0.0)
    )
    (setq dim (entlast))
    (if dim (ssadd dim diments))
    (setq i (1+ i))
  )

  ;; 列宽标注（顶部）
  (setq i 0)
  (while (&amp;lt; i col-count)
    (command &quot;_.DIMLINEAR&quot;
             &quot;_V&quot;
             (list (nth i ver-pos) y-max 0.0)
             (list (nth (1+ i) ver-pos) y-max 0.0)
             (list (/ (+ (nth i ver-pos) (nth (1+ i) ver-pos)) 2) (+ y-max 50) 0.0)
    )
    (setq dim (entlast))
    (if dim (ssadd dim diments))
    (setq i (1+ i))
  )
  (command &quot;UNDO&quot; &quot;END&quot;)

  ;; UNDO分组：编号文字、说明文字
  (command &quot;UNDO&quot; &quot;GROUP&quot;)

  ;; 添加说明文字
  (command &quot;_.TEXT&quot;
           (list x-max (+ y-max 50) 0.0)
           10
           0
           (strcat (itoa row-count) &quot;行 × &quot; (itoa col-count) &quot;列&quot;))

  ;; 行号编号（左边，数字，从上往下）
  (setq i 1)
  (while (&amp;lt; i (length hor-pos))
    (setq seq-x (- x-min 60))
    (setq seq-y (/ (+ (nth (1- i) hor-pos) (nth i hor-pos)) 2))
    (command &quot;_.TEXT&quot;
             (list seq-x seq-y 0.0)
             seq-text-height
             0
             (itoa i))
    (setq i (1+ i))
  )

  ;; 列号编号（顶部，字母，从左往右）
  (setq i 1)
  (while (&amp;lt; i (length ver-pos))
    (setq seq-x (/ (+ (nth (1- i) ver-pos) (nth i ver-pos)) 2))
    (setq seq-y (+ y-max 60))
    (command &quot;_.TEXT&quot;
             (list seq-x seq-y 0.0)
             seq-text-height
             0
             (index-to-letter i))
    (setq i (1+ i))
  )

  ;; 辅助线图层置底
  (setq grid-lines (ssget &quot;X&quot; &#39;((8 . &quot;GRID-LAYER&quot;))))
  (if grid-lines
    (command &quot;_DRAWORDER&quot; grid-lines &quot;&quot; &quot;B&quot;)
  )
  (command &quot;UNDO&quot; &quot;END&quot;)

  (princ (strcat &quot;\n[OK] 已生成表格，共 &quot; (itoa row-count) &quot; 行 × &quot; (itoa col-count) &quot; 列&quot;))
)
(prompt &quot;\n[警告] 区域中未检测到线段，请重新选择。&quot;)
</code></pre>
<p>  )<br>  (princ)<br>)</p>
<h1 id="回答"><a href="#回答" class="headerlink" title="回答"></a>回答</h1><p>你的这段 AutoLISP 脚本功能非常完整，下面是它的核心功能总结和一些优化建议（如果你想进一步精进）：</p>
<h2 id="✅-当前功能回顾"><a href="#✅-当前功能回顾" class="headerlink" title="✅ 当前功能回顾"></a>✅ 当前功能回顾</h2><p>你定义的 <code>c:ZZ</code> 命令主要完成以下任务：</p>
<h3 id="1-辅助图层与图形生成"><a href="#1-辅助图层与图形生成" class="headerlink" title="1. 辅助图层与图形生成"></a>1. <strong>辅助图层与图形生成</strong></h3><ul>
<li>创建图层 <code>GRID-LAYER</code>，设为红色。</li>
<li>根据选定区域内的线段分类为横线和竖线，并去重、排序。</li>
<li>在这些位置绘制延伸的红色辅助线。</li>
</ul>
<h3 id="2-尺寸标注"><a href="#2-尺寸标注" class="headerlink" title="2. 尺寸标注"></a>2. <strong>尺寸标注</strong></h3><ul>
<li>为每行高度添加线性标注（标注在线左侧）。</li>
<li>为每列宽度添加线性标注（标注在线顶部）。</li>
</ul>
<h3 id="3-编号与文字说明"><a href="#3-编号与文字说明" class="headerlink" title="3. 编号与文字说明"></a>3. <strong>编号与文字说明</strong></h3><ul>
<li>行编号：左侧，数字，从上往下。</li>
<li>列编号：顶部，字母，从左往右。</li>
<li>在右上角添加“n行 × m列”的文字说明。</li>
</ul>
<h3 id="4-图形图层排序"><a href="#4-图形图层排序" class="headerlink" title="4. 图形图层排序"></a>4. <strong>图形图层排序</strong></h3><ul>
<li>将辅助线图层 <code>GRID-LAYER</code> 移到最底层。</li>
</ul>
<h2 id="📌-建议优化与扩展（仅供参考）"><a href="#📌-建议优化与扩展（仅供参考）" class="headerlink" title="📌 建议优化与扩展（仅供参考）"></a>📌 建议优化与扩展（仅供参考）</h2><h3 id="1-支持选择图层"><a href="#1-支持选择图层" class="headerlink" title="1. 支持选择图层"></a>1. <strong>支持选择图层</strong></h3><p>当前是固定操作 <code>LINE</code> 实体，若扩展支持选择特定图层可能更通用。</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">setq</span> ss (<span class="name">ssget</span> <span class="string">&quot;W&quot;</span> p1 p2 &#x27;((<span class="number">0</span> . <span class="string">&quot;LINE&quot;</span>) (<span class="number">8</span> . <span class="string">&quot;YourLayerName&quot;</span>))))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>可添加提示让用户选择要处理的图层。</p>
<h3 id="2-调整辅助线延长长度为参数"><a href="#2-调整辅助线延长长度为参数" class="headerlink" title="2. 调整辅助线延长长度为参数"></a>2. <strong>调整辅助线延长长度为参数</strong></h3><p>你现在写死 <code>offset 30</code>，可以让用户输入：</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">initget</span> <span class="number">6</span>)</span><br><span class="line">(<span class="name">setq</span> offset (<span class="name">getdist</span> <span class="string">&quot;\n输入辅助线延长长度 &amp;lt;默认30&amp;gt;: &quot;</span>))</span><br><span class="line">(<span class="name">if</span> (<span class="name">null</span> offset) (<span class="name">setq</span> offset <span class="number">30</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="3-支持对标注文字样式的控制"><a href="#3-支持对标注文字样式的控制" class="headerlink" title="3. 支持对标注文字样式的控制"></a>3. <strong>支持对标注文字样式的控制</strong></h3><p>目前直接使用 <code>command &quot;_.TEXT&quot;</code>，可以增加文字样式选择或使用 <code>entmake</code> 更细致地控制样式。</p>
<h3 id="4-行列编号位置灵活设置"><a href="#4-行列编号位置灵活设置" class="headerlink" title="4. 行列编号位置灵活设置"></a>4. <strong>行列编号位置灵活设置</strong></h3><p>你目前写死了：</p>
<ul>
<li>行号放左侧；</li>
<li>列号放顶部。</li>
</ul>
<p>可以进一步扩展：</p>
<ul>
<li>行号支持放右侧；</li>
<li>列号支持放底部。</li>
</ul>
<p>通过让用户选择：<code>(&quot;顶部&quot; &quot;底部&quot;)</code> &#x2F; <code>(&quot;左侧&quot; &quot;右侧&quot;)</code>。</p>
<h2 id="✅-程序结构与稳定性良好"><a href="#✅-程序结构与稳定性良好" class="headerlink" title="✅ 程序结构与稳定性良好"></a>✅ 程序结构与稳定性良好</h2><ul>
<li>使用了 <code>vl-sort</code> 和 <code>remove-duplicates</code> 结合，自定义函数处理数据整洁；</li>
<li>使用 <code>UNDO GROUP</code> 分组操作非常专业，方便用户回退；</li>
<li>结构清晰、易于维护。</li>
</ul>
<h2 id="🎯-小结"><a href="#🎯-小结" class="headerlink" title="🎯 小结"></a>🎯 小结</h2><p>这个 <code>c:ZZ</code> 命令在 AutoCAD 表格网格标注场景中已经具备了很高的实用性，功能完整、鲁棒性强。你已经完成了一个 <strong>专业级的自动编号和标注工具</strong>！</p>
<p>如果你希望我帮你输出 <code>.lsp</code> 文件版本或继续增加某项功能（比如增加自动标注样式或更复杂表头布局支持），我可以协助你继续开发。</p>
<p>需要我帮你生成 <code>.lsp</code> 文件吗？或者还有其他需求？</p>
<h1 id="用户问题-1"><a href="#用户问题-1" class="headerlink" title="用户问题"></a>用户问题</h1><p>修改 行号标注从上往下，从1开始</p>
<h1 id="回答-1"><a href="#回答-1" class="headerlink" title="回答"></a>回答</h1><p>你当前的代码中，<strong>行号编号从上往下、从1开始</strong>，<strong>实际上是反了的</strong>，因为 <code>hor-pos</code> 是从下到上排序的，而你从前往后读取列表元素，导致数字是从下往上编号的。</p>
<h2 id="✅-修改方法"><a href="#✅-修改方法" class="headerlink" title="✅ 修改方法"></a>✅ 修改方法</h2><p>你只需要 <strong>将 hor-pos 列表反转</strong> 后再进行编号即可。</p>
<h3 id="👇-修改前这部分代码："><a href="#👇-修改前这部分代码：" class="headerlink" title="👇 修改前这部分代码："></a>👇 修改前这部分代码：</h3><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">;; 行号编号（左边，数字，从上往下）</span></span><br><span class="line">(<span class="name">setq</span> i <span class="number">1</span>)</span><br><span class="line">(<span class="name">while</span> (<span class="name">&amp;lt</span><span class="comment">; i (length hor-pos))</span></span><br><span class="line">  (<span class="name">setq</span> seq-x (<span class="name">-</span> x-min <span class="number">60</span>))</span><br><span class="line">  (<span class="name">setq</span> seq-y (<span class="name">/</span> (<span class="name">+</span> (<span class="name">nth</span> (<span class="number">1</span>- i) hor-pos) (<span class="name">nth</span> i hor-pos)) <span class="number">2</span>))</span><br><span class="line">  (<span class="name">command</span> <span class="string">&quot;_.TEXT&quot;</span></span><br><span class="line">           (<span class="name">list</span> seq-x seq-y <span class="number">0.0</span>)</span><br><span class="line">           seq-text-height</span><br><span class="line">           <span class="number">0</span></span><br><span class="line">           (<span class="name">itoa</span> i))</span><br><span class="line">  (<span class="name">setq</span> i (<span class="number">1</span>+ i))</span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="✅-修改为如下代码："><a href="#✅-修改为如下代码：" class="headerlink" title="✅ 修改为如下代码："></a>✅ 修改为如下代码：</h3><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">;; 行号编号（左边，数字，从上往下）</span></span><br><span class="line">(<span class="name">setq</span> rev-hor-pos (<span class="name">reverse</span> hor-pos))</span><br><span class="line">(<span class="name">setq</span> i <span class="number">1</span>)</span><br><span class="line">(<span class="name">while</span> (<span class="name">&amp;lt</span><span class="comment">; i (length rev-hor-pos))</span></span><br><span class="line">  (<span class="name">setq</span> seq-x (<span class="name">-</span> x-min <span class="number">60</span>))</span><br><span class="line">  (<span class="name">setq</span> seq-y (<span class="name">/</span> (<span class="name">+</span> (<span class="name">nth</span> (<span class="number">1</span>- i) rev-hor-pos) (<span class="name">nth</span> i rev-hor-pos)) <span class="number">2</span>))</span><br><span class="line">  (<span class="name">command</span> <span class="string">&quot;_.TEXT&quot;</span></span><br><span class="line">           (<span class="name">list</span> seq-x seq-y <span class="number">0.0</span>)</span><br><span class="line">           seq-text-height</span><br><span class="line">           <span class="number">0</span></span><br><span class="line">           (<span class="name">itoa</span> i))</span><br><span class="line">  (<span class="name">setq</span> i (<span class="number">1</span>+ i))</span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>这样，行号将从上往下编号，且从1开始，与你的需求一致 ✅</p>
<p>如果你希望我把完整修正后的 <code>.lsp</code> 文件内容打包发你，我可以马上提供。是否需要？</p>
<h1 id="用户问题-2"><a href="#用户问题-2" class="headerlink" title="用户问题"></a>用户问题</h1><p>我这个lsp脚本cad2010支持吗</p>
<h1 id="回答-2"><a href="#回答-2" class="headerlink" title="回答"></a>回答</h1><p>你的这段 LISP 脚本在 <strong>AutoCAD 2010</strong> 中基本是 <strong>兼容的</strong>，但要特别注意以下几点兼容性问题：</p>
<h2 id="✅-兼容性良好的部分"><a href="#✅-兼容性良好的部分" class="headerlink" title="✅ 兼容性良好的部分"></a>✅ <strong>兼容性良好的部分</strong></h2><table>
<thead>
<tr>
<th>功能</th>
<th>CAD 2010 支持</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>(vl-load-com)</td>
<td>✅</td>
<td>CAD 2000 以上版本都支持</td>
</tr>
<tr>
<td>vla-get-ActiveDocument 等 COM 接口</td>
<td>✅</td>
<td>完全支持</td>
</tr>
<tr>
<td>tblsearch, entget, entmake, command 等核心函数</td>
<td>✅</td>
<td>标准 AutoLISP</td>
</tr>
<tr>
<td>ssget, sslength, ssname, entlast 等选择集函数</td>
<td>✅</td>
<td>标准 AutoLISP</td>
</tr>
<tr>
<td>vl-sort</td>
<td>✅</td>
<td>Visual LISP 支持</td>
</tr>
<tr>
<td>chr, strcat, itoa, nth 等基本函数</td>
<td>✅</td>
<td>全支持</td>
</tr>
<tr>
<td>图层颜色设置 (vla-put-Color newLayer 1)</td>
<td>✅</td>
<td>支持</td>
</tr>
</tbody></table>
<h2 id="⚠️-你需要注意的问题"><a href="#⚠️-你需要注意的问题" class="headerlink" title="⚠️ 你需要注意的问题"></a>⚠️ <strong>你需要注意的问题</strong></h2><h3 id="1-✅-vl-remove-…-是-CAD-2010-支持的"><a href="#1-✅-vl-remove-…-是-CAD-2010-支持的" class="headerlink" title="1. ✅ (vl-remove …) 是 CAD 2010 支持的"></a>1. ✅ (vl-remove …) 是 CAD 2010 支持的</h3><p>你用了：</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">remove-duplicates</span> (<span class="name">vl-remove</span> (<span class="name">car</span> lst) (<span class="name">cdr</span> lst)))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这是完全 OK 的，在 CAD 2000+ 支持 Visual LISP 的版本中都可用。</p>
<h3 id="2-⚠️-DRAWORDER-命令（图形置底）"><a href="#2-⚠️-DRAWORDER-命令（图形置底）" class="headerlink" title="2. ⚠️ DRAWORDER 命令（图形置底）"></a>2. ⚠️ DRAWORDER 命令（图形置底）</h3><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">command</span> <span class="string">&quot;_DRAWORDER&quot;</span> grid-lines <span class="string">&quot;&quot;</span> <span class="string">&quot;B&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>AutoCAD 2010 支持 <code>DRAWORDER</code> 命令 ✅；</li>
<li>但 <code>grid-lines</code> 是选择集变量，使用时必须是有效的 <code>ssget</code> 结果；</li>
<li>确保 <code>grid-lines</code> 不为 <code>nil</code>，且里面确实有实体。</li>
</ul>
<h3 id="3-❗-Unicode-字符支持（如中文路径、字体）"><a href="#3-❗-Unicode-字符支持（如中文路径、字体）" class="headerlink" title="3. ❗ Unicode 字符支持（如中文路径、字体）"></a>3. ❗ Unicode 字符支持（如中文路径、字体）</h3><ul>
<li>你的脚本没有使用中文文字内容，所以 <strong>没有问题</strong>；</li>
<li>但在 AutoCAD 2010 的中文版本中，<strong>默认字体和 _.TEXT 的显示效果可能有兼容性问题</strong>，例如文字显示为问号 <code>???</code>；</li>
</ul>
<p>建议：使用文字样式（Text Style）或指定字体（如 <code>txt.shx</code> 或 <code>simhei.ttf</code>）来避免乱码。</p>
<h2 id="✅-建议测试前设置"><a href="#✅-建议测试前设置" class="headerlink" title="✅ 建议测试前设置"></a>✅ 建议测试前设置</h2><p>在 CAD 2010 加载前建议：</p>
<ol>
<li>打开 AutoCAD；</li>
<li>执行 <code>APPLOAD</code>，加载你的 <code>.lsp</code> 文件；</li>
<li>运行命令 <code>ZZ</code>；</li>
<li>观察命令行与绘图结果是否一致；</li>
<li>如果提示 <code>(vl-load-com)</code> 找不到，说明未启用 Visual LISP，建议切换 AutoCAD 2010 的完整版（非 LT 版）。</li>
</ol>
<h2 id="❌-AutoCAD-LT-不支持"><a href="#❌-AutoCAD-LT-不支持" class="headerlink" title="❌ AutoCAD LT 不支持"></a>❌ AutoCAD LT 不支持</h2><p>AutoCAD LT 是“精简版”，<strong>完全不支持 AutoLISP 或 Visual LISP</strong>，包括：</p>
<ul>
<li><code>vl-*</code> 系列函数（如 <code>vl-load-com</code>）</li>
<li><code>entmake</code>、<code>vla-...</code> 系列 COM 接口</li>
</ul>
<p><strong>结论</strong>：请确认你使用的是 AutoCAD 2010 标准版或高级版，不是 LT 版。</p>
<h2 id="✅-小结"><a href="#✅-小结" class="headerlink" title="✅ 小结"></a>✅ 小结</h2><table>
<thead>
<tr>
<th>项目</th>
<th>状态</th>
</tr>
</thead>
<tbody><tr>
<td>在 AutoCAD 2010 标准版中运行</td>
<td>✅ 支持</td>
</tr>
<tr>
<td>使用了兼容的函数</td>
<td>✅ 无问题</td>
</tr>
<tr>
<td>可能需注意文字显示或图层顺序问题</td>
<td>⚠️ 轻微注意即可</td>
</tr>
<tr>
<td>AutoCAD LT 支持</td>
<td>❌ 不支持任何 LISP 脚本</td>
</tr>
</tbody></table>
<p>如果你希望我把当前代码打包为 <code>.lsp</code> 文件供你直接加载，我可以立即生成。需要吗？</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">YiDa</p>
  <div class="site-description" itemprop="description">自古人生于世，须有一技之能；我辈既务斯业，便当专心用功；以后名扬四海，根据即在年轻。</div>
</div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2023 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">YiDa</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>

<script src="/js/utils.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
